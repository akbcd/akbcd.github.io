<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="renderer" content="webkit"><meta name="viewport" content="width=device-width"><title>yilia主题添加valine评论 | akbcd博客</title><meta name="keywords" content="yilia主题添加valine评论, akbcd"><meta name="description" content="本篇文章介绍yilia主题添加valine评论的方法闲话最后说，先来看方法（本篇文章所有图片均来自官方文档）"><meta property="og:type" content="article"><meta property="og:title" content="yilia主题添加valine评论"><meta property="og:url" content="https://akbcd.github.io/2020/04/22/yilia%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0valine%E8%AF%84%E8%AE%BA/index.html"><meta property="og:site_name" content="akbcd博客"><meta property="og:description" content="本篇文章介绍yilia主题添加valine评论的方法闲话最后说，先来看方法（本篇文章所有图片均来自官方文档）"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://akbcd.github.io/2020/04/22/yilia%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0valine%E8%AF%84%E8%AE%BA/valine.png"><meta property="og:image" content="https://akbcd.github.io/2020/04/22/yilia%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0valine%E8%AF%84%E8%AE%BA/valine2.png"><meta property="og:image" content="https://akbcd.github.io/2020/04/22/yilia%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0valine%E8%AF%84%E8%AE%BA/valine3.png"><meta property="og:image" content="https://akbcd.github.io/2020/04/22/yilia%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0valine%E8%AF%84%E8%AE%BA/Valine-Admin.webp"><meta property="og:image" content="https://akbcd.github.io/2020/04/22/yilia%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0valine%E8%AF%84%E8%AE%BA/Valine-Admin2.webp"><meta property="og:image" content="https://akbcd.github.io/2020/04/22/yilia%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0valine%E8%AF%84%E8%AE%BA/Valine-Admin3.webp"><meta property="og:image" content="https://akbcd.github.io/2020/04/22/yilia%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0valine%E8%AF%84%E8%AE%BA/Valine-Admin4.webp"><meta property="og:image" content="https://akbcd.github.io/2020/04/22/yilia%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0valine%E8%AF%84%E8%AE%BA/Valine-Admin5.webp"><meta property="og:image" content="https://akbcd.github.io/2020/04/22/yilia%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0valine%E8%AF%84%E8%AE%BA/Valine-Admin6.webp"><meta property="article:published_time" content="2020-04-22T01:24:59.000Z"><meta property="article:modified_time" content="2020-04-22T01:24:59.000Z"><meta property="article:author" content="akbcd"><meta property="article:tag" content="博客"><meta property="article:tag" content="hexo"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://akbcd.github.io/2020/04/22/yilia%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0valine%E8%AF%84%E8%AE%BA/valine.png"><link rel="dns-prefetch" href="https://akbcd.github.io"><link rel="preload" href="/css/main.css" as="style"><link rel="preload" href="/css/mobile.css" as="style"><link rel="preload" href="/css/iconfont.css" as="style"><link rel="preload" href="/css/com.css" as="style"><link rel="preload" href="/css/lib/photoswipe/photoswipe.css" as="style"><link rel="preload" href="/css/lib/photoswipe/default-skin/default-skin.css" as="style"><link rel="preload" href="/css/lib/APlayer/APlayer.min.css" as="style"><link rel="preload" href="/js/Util.js" as="script"><link rel="preload" href="/js/lib/photoswipe/photoswipe.min.js" as="script"><link rel="preload" href="/js/lib/photoswipe/photoswipe-ui-default.min.js" as="script"><link rel="preload" href="/js/lib/clipboard/clipboard.min.js" as="script"><link rel="preload" href="/js/backTop.js" as="script"><link rel="preload" href="/js/share.js" as="script"><link rel="preload" href="/js/anm.js" as="script"><link rel="preload" href="/js/fix.js" as="script"><link rel="preload" href="/js/slider.js" as="script"><link rel="preload" href="/js/addHighlightTool.js" as="script"><link rel="preload" href="/js/viewer.js" as="script"><link rel="preload" href="/js/mobile.js" as="script"><link rel="icon" href="/img/avatar.webp"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/css/mobile.css"><link rel="stylesheet" href="/css/iconfont.css"><link rel="stylesheet" href="/css/com.css"><link rel="stylesheet" href="/css/lib/photoswipe/photoswipe.css"><link rel="stylesheet" href="/css/lib/photoswipe/default-skin/default-skin.css"><link rel="stylesheet" type="text/css" href="/css/lib/APlayer/APlayer.min.css"><style type="text/css">#aplayer ::-webkit-scrollbar-button,#aplayer ::-webkit-scrollbar-track{display:none}</style><style type="text/css">#container.show,#js-searchModal{background:linear-gradient(200deg,#a0cfe4,#e8c37e)}</style><script>var yiliaConfig={mathjax:!1,isHome:!1,isPost:!0,isArchive:!1,isTag:!1,isCategory:!1,open_in_new:!1,toc_hide_index:!0,root:"/",innerArchive:!0,showTags:!1,anchor:!0,scrollPos:!0,highlight:JSON.parse('{"highlight_lang":true,"highlight_show":true}')}</script><script src="/js/Util.js"></script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="js-searchModal"><div style="padding:24px"><div class="search-header"><span><i class="icon-search icon"></i>&nbsp;&nbsp;搜索</span> <input class="search-ipt" type="text" placeholder="请输入搜索的关键字" id="js-searchInput"> <i class="icon-close icon" id="js-searchTextCancel"></i></div><div id="js-searchResult"></div></div><script src="/js/search.js"></script><script type="text/javascript">window.addEventListener("DOMContentLoaded",function(){document.getElementById("js-icon-search").setAttribute("title","搜索"),searchFunc("/search.xml","js-searchInput","js-searchResult")})</script></div><div id="js-modal-overlay"></div><div id="container" q-class="show:isCtnShow"><canvas id="anm-canvas" class="anm-canvas"></canvas><div class="left-col" q-class="show:isShow"><div class="overlay" style="background:#4d4d4d"></div><div class="intrude-less"><header class="header-inner"><a href="/" class="profilepic"><img src="/img/avatar.webp" class="js-avatar" alt="avatar"></a><hgroup><h1 class="header-author"><a href="/" aria-label="root"></a></h1></hgroup><nav class="header-menu"><ul><li><a href="/">主页</a></li><li><a href="/archives/">归档</a></li><li><a href="/tags/%E9%9A%8F%E7%AC%94/">随笔</a></li></ul></nav><nav class="header-smart-menu"><a q-on="click: openSlider(e, 'innerArchive')" style="cursor:pointer">所有文章</a> <a q-on="click: openSlider(e, 'friends')" style="cursor:pointer">友链</a></nav><nav class="header-nav"><div class="social"><a class="mail" target="_blank" href="mailto:2226227487@qq.com" title="mail"><i class="icon-mail"></i></a> <a class="gitee" target="_blank" href="https://gitee.com/akbcd/hexo-theme-yilia" title="gitee"><i class="icon-gitee"></i></a></div><script src="/js/lib/APlayer/APlayer.min.js"></script><div class="music-player"><div id="aplayer"></div><script>const ap = new APlayer({
        container: document.getElementById('aplayer'),
        fixed: 'true' === 'true',
        autoplay: 'false' === 'true',
        theme: '#4d4d4d',
        loop: 'one',
        order: 'random',
        preload: 'none',
        lrcType: Number('0'),
        volume: Number('0.7'),
        listFolded: 'true' === 'true',
        listMaxHeight: '96px',
        audio: JSON.parse('[{"name":"消えない想い","artist":"芳賀敬太","lrc":"[00:00.00]纯音乐，无歌词","cover":"//p2.music.126.net/U9d0tMpFwxCD2hj03KXLiA==/5907675976380960.jpg","url":"/music/消えない想い - 芳賀敬太.mp3"},{"name":"騎士王の誇り","artist":"川井憲次","lrc":"[00:00.00]纯音乐，无歌词","cover":"//p2.music.126.net/U0Tf2ESHBauv2F9t1PgEZA==/109951163339713541.jpg","url":"/music/騎士王の誇り - 川井憲次.mp3"},{"name":"春はゆく","artist":"Aimer","lrc":"[00:00.00]春はゆく - Aimer[00:05.00] 剧场版《Fate/stay night 「Heaven’s Feel」III.spring song》主题曲[00:10.00] 作曲 : Yuki Kajiura[00:15.00] 作词 : Yuki Kajiura[00:20.61] 编曲：梶浦由記[00:26.59]それでも手を取って（即使如此你仍愿意牵起我的手）[00:32.66]隣に佇んで（在我的身边半步不离）[00:38.61]初めて抱きしめた形（第一次得到了真正的拥抱）[00:50.57]欲張って（忍不住萌生的贪念）[00:53.54]哀しみを抱えすぎていたから（心中所怀的悲伤已太过深刻）[01:02.56]幸せは何処にも（所以无论身在何方）[01:08.51]もう持ちきれなくて（都无法将幸福维持）[01:14.50]花びらを散らした風が（风吹散了花瓣）[01:20.53]扉を開いて 変わる季節（吹开了心扉 改变了季节）[01:39.37]深々と降り積もる時の中（悄无声息不断堆积的时光中）[01:45.34]歓びも苦しみも等しく（无论欢乐还是悲痛）[01:51.26]二人の手のひらで溶けてゆく（都平等地在你我掌心融化）[01:57.33]微笑みも贖いもあなたの側で（微笑也好 赎罪也罢 都只为留在你的身边）[02:14.60]消え去ってゆくことも（连独自消失离开）[02:20.56]ひとりではできなくて（都无法做到的我）[02:26.56]弱虫で身勝手な私（是如此懦弱而自私）[02:38.53]償えない影を背負って（背负着难以赎清的罪孽的阴影）[02:44.53]約束の場所は花の盛り（我们约好的地点已有繁花盛开）[02:57.28]罪も愛も顧みず 春はゆく（不顾罪孽与爱 春日终将逝去）[03:03.28]輝きはただ空に眩しく（只剩下点点亮光还在空中闪耀）[03:09.40]私を許さないでいてくれる（请不要原谅我）[03:15.34]壊れたい 生まれたい（我渴望毁灭 也渴望重生）[03:19.85]あなたのそばで笑うよ（我会永远在你的身边微笑）[03:25.42]せめてそばにいる 大事な人達に（至少要为身边重要的人们）[03:33.32]いつも私は幸せでいると（送去温柔的梦境）[03:41.24]優しい夢を届けて（告诉他们 我一直很幸福）[03:50.56]あなたのそばにいる（我就在你的身边）[04:02.67]あなたを愛してる（我爱你）[04:08.59]あなたとここにいる（我就和你在这里）[04:14.55]あなたのそばに（我就在你的身边）[04:17.84]その日々は夢のように（那些时光就像是一场梦）","cover":"//img2.kuwo.cn/star/albumcover/300/56/85/378046121.jpg","url":"/music/春はゆく - Aimer.mp3"},{"name":"光るなら","artist":"Goose House","lrc":"[00:00.00]光るなら - Goose house[00:05.60]词：Goose house[00:10.60]曲：Goose house[00:15.440]雨上がりの虹も (雨过天晴的彩虹)[00:20.710]凛と咲いた花も (凛然绽放的花朵)[00:23.810]色づき溢れ出す (色彩随之满溢缤纷)[00:29.220]茜色の空 仰ぐ君に (望着那个仰望绯红色天空的你)[00:35.260]あの日 恋に落ちた (就在那天 我坠入了爱河)[00:40.800]瞬間のドラマチック (戏剧化的那一瞬间)[00:44.360]フィルムの中の1コマも (如荧幕中的特写镜头)[00:47.100]消えないよ 心に刻むから (早已深深铭刻在我心中 永远不会消失)[00:56.210]君だよ 君なんだよ 教えてくれた (是你 是你 告诉我)[01:02.070]暗闇も光るなら (若能在黑暗中绽放光芒)[01:05.020]星空になる (便能化作星空)[01:08.119]悲しみを笑顔に (悲伤化作笑颜)[01:10.920]もう隠さないで (已经无需隐藏)[01:14.070]煌めくどんな星も (漫天闪耀着的星光)[01:17.030]君を照らすから (都会为你照亮前行)[01:20.930]眠りも忘れて 迎えた朝日が (一夜未眠迎来的朝阳)[01:28.340]やたらと突き刺さる (却愈加刺痛我心)[01:34.340]低気圧運ぶ 頭痛だって (令人烦闷的头痛)[01:39.500]忘れる 君に会えば (只要见到你 便能瞬间遗忘)[01:45.610]静寂はロマンティック (静寂编制你我的罗曼史)[01:48.350]紅茶に溶けたシュガーのように (如红茶里融化的砂糖)[01:51.620]全身に巡るよ 君の声 (你的声音萦绕全身)[02:00.640]君だよ 君なんだよ (是你 是你)[02:03.490]笑顔をくれた (带给我笑容)[02:06.590]涙も光るなら (泪滴若能绽放光芒)[02:09.550]流星になる (便能化作流星)[02:12.500]傷付いたその手を (这伤痕累累的双手)[02:15.400]もう離さないで (请别再松开)[02:18.550]願いを込めた空に (寄托心愿的天空)[02:21.400]明日が来るから (明天一定会来到)[02:25.820]導いてくれた 光は 君だよ (指引着我前进的光芒 就是你啊)[02:32.119]つられて僕も 走り出した (我也不禁迈步奔向前方)[02:36.640]知らぬ間に クロスし始めた (不知不觉间 我们交织在一起)[02:43.250]ほら 今だ ここで 光るなら (看 就是现在 若此处有光芒)[02:50.050]君だよ 君なんだよ 教えてくれた (是你 是你 告诉我)[02:56.010]暗闇は終わるから (黑暗终究会过去)[03:01.240]君だよ 君なんだよ 教えてくれた (是你 是你 告诉我)[03:08.150]暗闇も光るなら (若能在黑暗中绽放光芒)[03:11.050]星空になる (便能化作星空)[03:14.120]悲しみを笑顔に (悲伤化作笑颜)[03:16.920]もう隠さないで (已经无需隐藏)[03:20.130]煌めくどんな星も (漫天闪耀着的星光)[03:22.990]君を照らすから (都会为你照亮前行)[03:26.810]答えはいつでも偶然？必然？ (答案是 偶然？必然？)[03:32.960]いつか選んだ道こそ (你曾经选择的路)[03:36.530]運命になる (才是真正的命运)[03:39.340]握りしめた その希望も不安も (紧握在手心的希望也好 不安也罢)[03:44.940]きっと2人を動かす 光になるから (必定会化作驱使我们前进的光芒)","cover":"//img4.kuwo.cn/star/albumcover/300/1/94/1162016738.jpg","url":"/music/光るなら - Goose house.mp3"},{"name":"Hey !","artist":"PLEEG","lrc":"[00:00.00]纯音乐，无歌词","cover":"//p2.music.126.net/6WqNooHkY4ELUGkdQBzrkg==/109951163082345228.jpg","url":"/music/Hey ! - PLEEG.mp3"}]')
      });</script></div></nav></header></div></div><div class="mid-col" q-class="show:isShow,hide:isShow|isFalse"><nav id="mobile-nav"><div class="overlay js-overlay" style="background:#4d4d4d"></div><div class="btnctn js-mobile-btnctn"><div class="slider-trigger list" q-on="click: openSlider(e)"><i class="icon icon-sort"></i></div></div><div class="intrude-less"><header class="header-inner"><div class="profilepic"><img src="/img/avatar.webp" class="js-avatar" alt="avatar"></div><hgroup><h1 class="header-author js-header-author"></h1></hgroup><nav class="header-nav"><div class="social"><a class="mail" target="_blank" href="mailto:2226227487@qq.com" title="mail"><i class="icon-mail"></i></a> <a class="gitee" target="_blank" href="https://gitee.com/akbcd/hexo-theme-yilia" title="gitee"><i class="icon-gitee"></i></a></div></nav><nav class="header-menu js-header-menu"><ul style="width:70%"><li style="width:33.333333333333336%"><a href="/">主页</a></li><li style="width:33.333333333333336%"><a href="/archives/">归档</a></li><li style="width:33.333333333333336%"><a href="/tags/%E9%9A%8F%E7%AC%94/">随笔</a></li></ul></nav><nav class="music-player"><div id="mobile-aplayer"></div><script>const map = new APlayer({
        container: document.getElementById('mobile-aplayer'),
        fixed: 'false' === 'true',
        autoplay: 'false' === 'true',
        theme: '#4d4d4d',
        loop: 'all',
        order: 'random',
        preload: 'none',
        lrcType: Number('1'),
        volume: Number('0.7'),
        listFolded: 'true' === 'true',
        listMaxHeight: '',
        audio: JSON.parse('[{"name":"消えない想い","artist":"芳賀敬太","lrc":"[00:00.00]纯音乐，无歌词","cover":"//p2.music.126.net/U9d0tMpFwxCD2hj03KXLiA==/5907675976380960.jpg","url":"/music/消えない想い - 芳賀敬太.mp3"},{"name":"騎士王の誇り","artist":"川井憲次","lrc":"[00:00.00]纯音乐，无歌词","cover":"//p2.music.126.net/U0Tf2ESHBauv2F9t1PgEZA==/109951163339713541.jpg","url":"/music/騎士王の誇り - 川井憲次.mp3"},{"name":"春はゆく","artist":"Aimer","lrc":"[00:00.00]春はゆく - Aimer[00:05.00] 剧场版《Fate/stay night 「Heaven’s Feel」III.spring song》主题曲[00:10.00] 作曲 : Yuki Kajiura[00:15.00] 作词 : Yuki Kajiura[00:20.61] 编曲：梶浦由記[00:26.59]それでも手を取って（即使如此你仍愿意牵起我的手）[00:32.66]隣に佇んで（在我的身边半步不离）[00:38.61]初めて抱きしめた形（第一次得到了真正的拥抱）[00:50.57]欲張って（忍不住萌生的贪念）[00:53.54]哀しみを抱えすぎていたから（心中所怀的悲伤已太过深刻）[01:02.56]幸せは何処にも（所以无论身在何方）[01:08.51]もう持ちきれなくて（都无法将幸福维持）[01:14.50]花びらを散らした風が（风吹散了花瓣）[01:20.53]扉を開いて 変わる季節（吹开了心扉 改变了季节）[01:39.37]深々と降り積もる時の中（悄无声息不断堆积的时光中）[01:45.34]歓びも苦しみも等しく（无论欢乐还是悲痛）[01:51.26]二人の手のひらで溶けてゆく（都平等地在你我掌心融化）[01:57.33]微笑みも贖いもあなたの側で（微笑也好 赎罪也罢 都只为留在你的身边）[02:14.60]消え去ってゆくことも（连独自消失离开）[02:20.56]ひとりではできなくて（都无法做到的我）[02:26.56]弱虫で身勝手な私（是如此懦弱而自私）[02:38.53]償えない影を背負って（背负着难以赎清的罪孽的阴影）[02:44.53]約束の場所は花の盛り（我们约好的地点已有繁花盛开）[02:57.28]罪も愛も顧みず 春はゆく（不顾罪孽与爱 春日终将逝去）[03:03.28]輝きはただ空に眩しく（只剩下点点亮光还在空中闪耀）[03:09.40]私を許さないでいてくれる（请不要原谅我）[03:15.34]壊れたい 生まれたい（我渴望毁灭 也渴望重生）[03:19.85]あなたのそばで笑うよ（我会永远在你的身边微笑）[03:25.42]せめてそばにいる 大事な人達に（至少要为身边重要的人们）[03:33.32]いつも私は幸せでいると（送去温柔的梦境）[03:41.24]優しい夢を届けて（告诉他们 我一直很幸福）[03:50.56]あなたのそばにいる（我就在你的身边）[04:02.67]あなたを愛してる（我爱你）[04:08.59]あなたとここにいる（我就和你在这里）[04:14.55]あなたのそばに（我就在你的身边）[04:17.84]その日々は夢のように（那些时光就像是一场梦）","cover":"//img2.kuwo.cn/star/albumcover/300/56/85/378046121.jpg","url":"/music/春はゆく - Aimer.mp3"},{"name":"光るなら","artist":"Goose House","lrc":"[00:00.00]光るなら - Goose house[00:05.60]词：Goose house[00:10.60]曲：Goose house[00:15.440]雨上がりの虹も (雨过天晴的彩虹)[00:20.710]凛と咲いた花も (凛然绽放的花朵)[00:23.810]色づき溢れ出す (色彩随之满溢缤纷)[00:29.220]茜色の空 仰ぐ君に (望着那个仰望绯红色天空的你)[00:35.260]あの日 恋に落ちた (就在那天 我坠入了爱河)[00:40.800]瞬間のドラマチック (戏剧化的那一瞬间)[00:44.360]フィルムの中の1コマも (如荧幕中的特写镜头)[00:47.100]消えないよ 心に刻むから (早已深深铭刻在我心中 永远不会消失)[00:56.210]君だよ 君なんだよ 教えてくれた (是你 是你 告诉我)[01:02.070]暗闇も光るなら (若能在黑暗中绽放光芒)[01:05.020]星空になる (便能化作星空)[01:08.119]悲しみを笑顔に (悲伤化作笑颜)[01:10.920]もう隠さないで (已经无需隐藏)[01:14.070]煌めくどんな星も (漫天闪耀着的星光)[01:17.030]君を照らすから (都会为你照亮前行)[01:20.930]眠りも忘れて 迎えた朝日が (一夜未眠迎来的朝阳)[01:28.340]やたらと突き刺さる (却愈加刺痛我心)[01:34.340]低気圧運ぶ 頭痛だって (令人烦闷的头痛)[01:39.500]忘れる 君に会えば (只要见到你 便能瞬间遗忘)[01:45.610]静寂はロマンティック (静寂编制你我的罗曼史)[01:48.350]紅茶に溶けたシュガーのように (如红茶里融化的砂糖)[01:51.620]全身に巡るよ 君の声 (你的声音萦绕全身)[02:00.640]君だよ 君なんだよ (是你 是你)[02:03.490]笑顔をくれた (带给我笑容)[02:06.590]涙も光るなら (泪滴若能绽放光芒)[02:09.550]流星になる (便能化作流星)[02:12.500]傷付いたその手を (这伤痕累累的双手)[02:15.400]もう離さないで (请别再松开)[02:18.550]願いを込めた空に (寄托心愿的天空)[02:21.400]明日が来るから (明天一定会来到)[02:25.820]導いてくれた 光は 君だよ (指引着我前进的光芒 就是你啊)[02:32.119]つられて僕も 走り出した (我也不禁迈步奔向前方)[02:36.640]知らぬ間に クロスし始めた (不知不觉间 我们交织在一起)[02:43.250]ほら 今だ ここで 光るなら (看 就是现在 若此处有光芒)[02:50.050]君だよ 君なんだよ 教えてくれた (是你 是你 告诉我)[02:56.010]暗闇は終わるから (黑暗终究会过去)[03:01.240]君だよ 君なんだよ 教えてくれた (是你 是你 告诉我)[03:08.150]暗闇も光るなら (若能在黑暗中绽放光芒)[03:11.050]星空になる (便能化作星空)[03:14.120]悲しみを笑顔に (悲伤化作笑颜)[03:16.920]もう隠さないで (已经无需隐藏)[03:20.130]煌めくどんな星も (漫天闪耀着的星光)[03:22.990]君を照らすから (都会为你照亮前行)[03:26.810]答えはいつでも偶然？必然？ (答案是 偶然？必然？)[03:32.960]いつか選んだ道こそ (你曾经选择的路)[03:36.530]運命になる (才是真正的命运)[03:39.340]握りしめた その希望も不安も (紧握在手心的希望也好 不安也罢)[03:44.940]きっと2人を動かす 光になるから (必定会化作驱使我们前进的光芒)","cover":"//img4.kuwo.cn/star/albumcover/300/1/94/1162016738.jpg","url":"/music/光るなら - Goose house.mp3"},{"name":"Hey !","artist":"PLEEG","lrc":"[00:00.00]纯音乐，无歌词","cover":"//p2.music.126.net/6WqNooHkY4ELUGkdQBzrkg==/109951163082345228.jpg","url":"/music/Hey ! - PLEEG.mp3"}]')
      });</script></nav></header></div><div class="mobile-mask" style="display:none" q-show="isShow"></div></nav><div id="wrapper" class="body-wrap"><div class="menu-l"><div class="canvas-wrap"><canvas data-colors="#eaeaea" data-sectionheight="100" data-contentid="js-content" id="myCanvas1" class="anm-canvas"></canvas></div><div id="js-content" class="content-ll"><article id="post-yilia主题添加valine评论" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-inner"><header class="article-header"><h1 class="article-title" itemprop="name">yilia主题添加valine评论</h1><a href="/2020/04/22/yilia%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0valine%E8%AF%84%E8%AE%BA/" class="archive-article-date"><time datetime="2020-04-22T01:24:59.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2020-04-22</time></a><div style="color:#999"><span><i class="icon-wordcount icon"></i>&nbsp;字数&nbsp;4.2k&nbsp;</span></div></header><div class="article-entry" itemprop="articleBody"><div class="article-content"><p>本篇文章介绍yilia主题添加valine评论的方法<br>闲话最后说，先来看方法（本篇文章所有图片均来自官方文档）</p><span id="more"></span><p><strong>注意：近期由于国际版 LeanCloud 域名更新，valine评论系统部署后可能无法使用！参看：</strong><br><a target="_blank" rel="noopener" href="https://github.com/xCss/Valine/issues/340">https://github.com/xCss/Valine/issues/340</a></p><h2 id="快速开始"><a href="#快速开始" class="headerlink" title="快速开始"></a>快速开始</h2><p>根据<a target="_blank" rel="noopener" href="https://valine.js.org/quickstart.html">valine</a>官方文档，先要在<code>LeanCloud</code>获取<strong>APP ID</strong>和<strong>APP Key</strong><br>登录或注册<a target="_blank" rel="noopener" href="https://www.leancloud.cn/">LeanCloud</a>，建议注册<a target="_blank" rel="noopener" href="https://leancloud.app/">国际版</a>用户，<strong>不需要绑定域名</strong>，但是都需要绑定手机号<br>进入控制台后点击左下角创建应用，选择开发版<br><img src="valine.png"><br>应用创建好以后，进入刚刚创建的应用，选择左下角的设置&gt;应用Key，然后就能看到你的<strong>APP ID</strong>和<strong>APP Key</strong>了（复制下来）：<br><img src="valine2.png"><br>评论数据管理<br>由于Valine是无后端评论系统，所以也就没有开发评论数据管理功能。请自行登录<code>Leancloud</code>应用管理。<br>具体步骤：登录&gt;选择你创建的应用&gt;存储&gt;选择<code>Class Comment</code>，然后就可以尽情的发挥你的权利啦</p><blockquote><p>当然，你也可以配合<code>@DesertsP</code>开发的<code>Valine-Admin</code>进行评论数据管理（下面在<a href="#valine%E8%BF%9B%E9%98%B6">valine进阶</a>有介绍）</p></blockquote><p>安全域名<br>为了你的数据安全，请设置自己的安全域名：<br><img src="valine3.png"><br>这里简单说明一下，如果你的博客是在github上托管，输入自己的<strong>博客首页地址</strong>以及<strong>本地hexo服务器地址</strong>即可（下面供参考）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://xxx.github.io</span><br><span class="line">http://localhost:4000</span><br></pre></td></tr></table></figure><h2 id="主题添加valine评论模块"><a href="#主题添加valine评论模块" class="headerlink" title="主题添加valine评论模块"></a>主题添加valine评论模块</h2><p>首先找到主题评论模块文件<br>定位文件<code>themes\yilia\layout\_partial\article.ejs</code>，找到导入评论模块的代码<code>&lt;% if (!index &amp;&amp; post.comments)&#123; %&gt;</code><br>在<code>&lt;% if (!index &amp;&amp; post.comments)&#123; %&gt;</code>下面添加</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if (theme.valine &amp;&amp; theme.valine.enable)&#123; %&gt;</span><br><span class="line">&lt;%- partial(&#x27;post/valine&#x27;, &#123;</span><br><span class="line">    key: post.slug,</span><br><span class="line">    title: post.title,</span><br><span class="line">    url: config.url+url_for(post.path)</span><br><span class="line">&#125;) %&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure><p>在<code>themes\yilia\layout\_partial\post</code>文件夹下创建<code>valine.ejs</code>文件<br>将以下代码添加到<code>valine.ejs</code>文件中，valine需要用到<strong>Valine.min.js</strong>文件，引用cdn库最新版，也可以将文件下载到本地，本地引用<br>官方推荐使用的cdn：<a target="_blank" rel="noopener" href="https://valine.js.org/cdn.html">unpkg</a>，这里以jsdelivr为例<br>实际上需要<strong>两个js文件</strong>，最新版本中，引用<strong>Valine.min.js</strong>文件会自动从网络上调用<strong>av-min.js</strong>文件，不需要手动引用，取决于valine版本</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="comment">/* 适配yilia主题 */</span></span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#valine</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#valine</span> <span class="selector-class">.vwrap</span>&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#c8c8c8</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#valine</span> <span class="selector-class">.vwrap</span> <span class="selector-class">.vheader</span> <span class="selector-tag">input</span>,<span class="selector-id">#valine</span> <span class="selector-class">.vcard</span>&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> dashed <span class="number">#c8c8c8</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#valine</span> <span class="selector-class">.vwrap</span> <span class="selector-tag">button</span>,<span class="selector-id">#valine</span> <span class="selector-class">.vmore</span>&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="number">#c8c8c8</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">800px</span>) &#123;</span></span><br><span class="line"><span class="language-css">    <span class="selector-id">#valine</span>&#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;valine&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">new</span> <span class="title class_">Valine</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">el</span>: <span class="string">&#x27;#valine&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">appId</span>: <span class="string">&#x27;&lt;%- theme.valine.appId %&gt;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">appKey</span>: <span class="string">&#x27;&lt;%- theme.valine.appKey %&gt;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">placeholder</span>: <span class="string">&#x27;&lt;%= theme.valine.placeholder %&gt;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">avatar</span>: <span class="string">&#x27;&lt;%- theme.valine.avatar %&gt;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">pageSize</span>: <span class="string">&#x27;&lt;%- theme.valine.pageSize %&gt;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">lang</span>: <span class="string">&#x27;&lt;% if (config.language == &quot;zh-CN&quot;) &#123;  %&gt;zh-cn&lt;% &#125; else &#123; %&gt;en&lt;% &#125; %&gt;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">highlight</span>: <span class="string">&#x27;&lt;%- theme.valine.highlight %&gt;&#x27;</span> === <span class="string">&#x27;true&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">recordIp</span>: <span class="string">&#x27;&lt;%- theme.valine.recordIP %&gt;&#x27;</span> === <span class="string">&#x27;true&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">enableQQ</span>: <span class="string">&#x27;&lt;%- theme.valine.enableQQ %&gt;&#x27;</span> === <span class="string">&#x27;true&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">serverURLs</span>: <span class="string">&#x27;&lt;%= theme.valine.serverURLs %&gt;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  &#125;);</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;veditor&#x27;</span>).<span class="property">maxLength</span>=<span class="string">&#x27;&lt;%- theme.valine.maxLength %&gt;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>valine评论会通过js生成自己的样式，与yilia主题有些冲突，进行了简单适配（根据自己需要进行更改）<br><strong>注意：</strong><code>lang</code>变量，根据自己需要修改<br>最后，在主题<code>themes\yilia\_config.yml</code>文件中添加valine配置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">valine:</span><br><span class="line">  enable: true</span><br><span class="line">  appId: </span><br><span class="line">  appKey: </span><br><span class="line">  placeholder: &#x27;Just Go Go.&#x27; # 评论框占位提示符</span><br><span class="line">  maxLength: 500 # 评论框允许输入的最大字符数</span><br><span class="line">  avatar: &#x27;mp&#x27; # Gravatar style : &#x27;&#x27;/mp/identicon/monsterid/wavatar/retro/robohash/hide</span><br><span class="line">  pageSize: 10 # 评论列表分页</span><br><span class="line">  highlight: true # 代码块高亮</span><br><span class="line">  recordIP: false # 是否记录评论者IP</span><br><span class="line">  enableQQ: false # 是否启用昵称框自动获取QQ昵称和QQ头像, 默认关闭</span><br><span class="line">  serverURLs: https://xxx.api.lncldglobal.com # REST API 服务器地址</span><br></pre></td></tr></table></figure><p>各个配置项含义参考valine官方文档中<a target="_blank" rel="noopener" href="https://valine.js.org/configuration.html">配置项</a><br>根据自己需要更改，与上面<code>valine.ejs</code>文件对应<br>其中：<br><code>maxLength</code>为评论框允许输入的最大字符数，防止恶意刷评而追加的设定，如不需要请手动删除<code>valine.ejs</code>与<code>_config.yml</code>关联代码<br><code>serverURLs</code>为服务器地址，参看：LeanCloud》国际版》设置》应用凭证》服务器地址》REST API 服务器地址，xxx为appId的前八位</p><h2 id="使用valine"><a href="#使用valine" class="headerlink" title="使用valine"></a>使用valine</h2><p>主题<code>themes\yilia\_config.yml</code>文件valine配置中enable设置为true，将上面复制的<strong>APP ID</strong>和<strong>APP Key</strong>添加到对应的appId和appKey中<br>LeanCloud》国际版》设置》应用凭证》服务器地址》REST API 服务器地址，添加至serverURLs中<br>启动本地服务<code>hexo s</code><br>在浏览器中预览，valine评论模块出现<br>如果想对某篇文章关闭评论，在文章开头<code>Front-matter</code>菜单中添加<code>comments: false</code>属性（默认都开启评论）</p><h2 id="使用valine评论的文章阅读量统计功能"><a href="#使用valine评论的文章阅读量统计功能" class="headerlink" title="使用valine评论的文章阅读量统计功能"></a>使用valine评论的文章阅读量统计功能</h2><p>参看官方文档：<a target="_blank" rel="noopener" href="https://valine.js.org/visitor.html">https://valine.js.org/visitor.html</a><br>Valine 从 <code>v1.2.0</code> 开始支持文章阅读量统计。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">new Valine(&#123;</span><br><span class="line">    el:&#x27;#valine&#x27;,</span><br><span class="line">    ...</span><br><span class="line">    visitor: (&quot;localhost&quot; != document.domain)?&lt;%- theme.valine.visitor %&gt;:false // 阅读量统计</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>此段代码与官方不同，旨在解决使用valine评论的文章阅读量统计功能，本地预览文章也会增加阅读量的问题</p><blockquote><p>如果开启了阅读量统计，Valine 会自动检测 leancloud 应用中是否存在Counter类，如果不存在会自动创建，无需手动创建~</p></blockquote><p>Valine会自动查找页面中class值为leancloud_visitors的元素，获取其id为查询条件。并将得到的值填充到其class的值为leancloud-visitors-count的子元素里：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- id 将作为查询条件 --&gt;</span><br><span class="line">&lt;span id=&quot;&lt;Your/Path/Name&gt;&quot; class=&quot;leancloud_visitors&quot; data-flag-title=&quot;Your Article Title&quot;&gt;</span><br><span class="line">    &lt;em class=&quot;post-meta-item-text&quot;&gt;阅读量 &lt;/em&gt;</span><br><span class="line">    &lt;i class=&quot;leancloud-visitors-count&quot;&gt;1000000&lt;/i&gt;</span><br><span class="line">&lt;/span&gt;</span><br></pre></td></tr></table></figure><p>下面以yilia主题为例，应用valine评论的文章阅读量统计功能</p><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>在主题配置文件中valine下添加如下配置：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">valine:</span><br><span class="line">  ...</span><br><span class="line">  visitor: true # 文章访问量统计</span><br></pre></td></tr></table></figure><p>定位主题文件<code>themes\yilia\layout\_partial\article.ejs</code>在header标签下导入date语句下面添加（添加位置在文章日期的下面）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;header class=&quot;article-header&quot;&gt;</span><br><span class="line">    &lt;%- partial(&#x27;post/title&#x27;, &#123;class_name: &#x27;article-title&#x27;&#125;) %&gt;</span><br><span class="line">    &lt;% if (!post.noDate)&#123; %&gt;</span><br><span class="line">    &lt;%- partial(&#x27;post/date&#x27;, &#123;class_name: &#x27;archive-article-date&#x27;, date_format: null&#125;) %&gt;</span><br><span class="line">    &lt;% &#125; %&gt;</span><br><span class="line">    &lt;!-- 开始添加 --&gt;</span><br><span class="line">    &lt;% if(!index &amp;&amp; theme.valine.enable &amp;&amp; theme.valine.visitor)&#123; %&gt;</span><br><span class="line">        &lt;div style=&quot;color: #999&quot;&gt;</span><br><span class="line">        &lt;span id=&quot;&lt;%- url_for(post.path) %&gt;&quot; class=&quot;leancloud_visitors&quot; data-flag-title=&quot;&lt;%= post.title %&gt;&quot;&gt;当前页访问次数 &lt;i class=&quot;leancloud-visitors-count&quot;&gt;&lt;/i&gt;&lt;/span&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;% &#125; %&gt;</span><br><span class="line">    &lt;!-- 添加结束 --&gt;</span><br><span class="line">&lt;/header&gt;</span><br></pre></td></tr></table></figure><p>参考官方文档，将span标签的id修改为文章路径：<code>url_for(post.path)</code>，<code>data-flag-title</code>属性的值修改为<code>post.title</code>。<br>添加基于valine实现的判断条件，div标签添加color属性使颜色与日期颜色相匹配（适配yilia主题），可以根据自己需要进行修改。<br>阅读量统计数据可以在leancloud 应用中修改。<br><strong>到此，yilia主题添加valine评论完成</strong><br>以下内容为：<br>配合<code>@DesertsP</code>开发的<code>Valine-Admin</code>进行评论数据管理，这里简称valine进阶<br>通过<code>Valine-Admin</code>，我们可以建立一个valine评论后台管理，并且实现邮件提醒（官方自带的邮件提醒功能将在v1.4.0发布时下线，请使用自带邮件提醒的用户注意更改为第三方邮件提醒）</p><h2 id="valine进阶"><a href="#valine进阶" class="headerlink" title="valine进阶"></a>valine进阶</h2><p>参考<a target="_blank" rel="noopener" href="https://deserts.io/valine-admin-document/">Valine Admin文档</a></p><blockquote><p>Valine Admin 是 Valine 评论系统的后端功能补充和增强，主要实现评论邮件通知、评论管理、垃圾评论过滤等功能。<br>支持完全自定义的邮件通知模板，基于Akismet API实现准确的垃圾评论过滤。</p></blockquote><p><strong>云引擎”一键”部署</strong><br>（建议使用<a target="_blank" rel="noopener" href="https://leancloud.app/">LeanCloud国际版</a>，减少不必要的麻烦。）<br>1.在Leancloud云引擎设置界面，填写代码库并保存：<a target="_blank" rel="noopener" href="https://github.com/DesertsP/Valine-Admin.git">https://github.com/DesertsP/Valine-Admin.git</a><br>建议使用track23修改的允许跨域请求的Valine-Admin进行部署：<a target="_blank" rel="noopener" href="https://github.com/track23/Valine-Admin.git">https://github.com/track23/Valine-Admin.git</a><br>部署失败，可以参照提交记录自行修改后，重新部署<br><img src="Valine-Admin.webp" alt="设置仓库"><br>2.在设置页面，设置环境变量以及 Web 二级域名。<br><img src="Valine-Admin2.webp" alt="环境变量"><br>下面显示必填字段及一些更详细的说明</p><table><thead><tr><th align="left">变量</th><th align="left">示例</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">SITE_NAME</td><td align="left">Deserts</td><td align="left">[必填]填写自己的博客名称</td></tr><tr><td align="left">SITE_URL</td><td align="left"><a target="_blank" rel="noopener" href="https://xxx.github.io/">https://xxx.github.io</a></td><td align="left">[必填]博客首页地址，结尾不需要<code>/</code></td></tr><tr><td align="left">SMTP_SERVICE</td><td align="left">QQ</td><td align="left">[新版支持]邮件服务提供商，支持 QQ、163、126、Gmail 以及<a target="_blank" rel="noopener" href="https://nodemailer.com/smtp/well-known/#supported-services">更多</a></td></tr><tr><td align="left">SMTP_USER</td><td align="left"><a href="mailto:&#120;&#x78;&#x78;&#x78;&#x78;&#120;&#x40;&#113;&#x71;&#46;&#99;&#111;&#109;">&#120;&#x78;&#x78;&#x78;&#x78;&#120;&#x40;&#113;&#x71;&#46;&#99;&#111;&#109;</a></td><td align="left">[必填]SMTP登录用户，就是输入自己的邮箱</td></tr><tr><td align="left">SMTP_PASS</td><td align="left">ccxxxxxxxxch</td><td align="left">[必填]SMTP登录密码，如果是QQ邮箱，填写在邮箱设置中获取登录第三方邮箱客户端的授权码，如果QQ邮箱设有独立登录密码的话，自己尝试吧</td></tr><tr><td align="left">SENDER_NAME</td><td align="left">Deserts</td><td align="left">[必填]评论邮件通知的发件人</td></tr><tr><td align="left">SENDER_EMAIL</td><td align="left"><a href="mailto:&#x78;&#120;&#120;&#120;&#x78;&#120;&#x40;&#113;&#113;&#46;&#99;&#111;&#x6d;">&#x78;&#120;&#120;&#120;&#x78;&#120;&#x40;&#113;&#113;&#46;&#99;&#111;&#x6d;</a></td><td align="left">[必填]发件邮箱，填写自己的邮箱即可</td></tr><tr><td align="left">ADMIN_URL</td><td align="left"><a target="_blank" rel="noopener" href="https://xxx.leanapp.cn/">https://xxx.leanapp.cn/</a></td><td align="left">[建议]Web主机二级域名，用于自动唤醒，其实就是评论后台管理的域名，需要参考下面Web主机域名填写，国际版与国内版不一样</td></tr></tbody></table><p><strong>以上必填参数请务必正确设置。</strong><br>二级域名用于评论后台管理，如<code>https://deserts.leanapp.cn</code>（国内版），<code>https://deserts.avosapps.us</code>（国际版），取决于自己注册的用户。<br><img src="Valine-Admin3.webp" alt="二级域名"><br>3.切换到部署标签页，选择Git源码部署，分支使用master，点击部署即可<br><img src="Valine-Admin4.webp" alt="一键部署"><br>第一次部署需要花点时间。<br><img src="Valine-Admin5.webp" alt="部署过程"><br>4.评论管理。<br>访问设置的二级域名https://二级域名.leanapp.cn/sign-up，注册管理员登录信息，如：<code>https://deserts.leanapp.cn/sign-up</code><br>国际版设置的二级域名https://二级域名.avosapps.us/sign-up<br><img src="Valine-Admin6.webp" alt="管理员注册"><br>注册成功后会自动跳转至登录页<br>此后，可以通过https://二级域名.leanapp.cn/ 管理评论。<br>国际版：https://二级域名.avosapps.us/<br>5.定时任务设置</p><blockquote><p>因流控原因，通过定时任务唤醒体验版实例失败，建议升级至标准版云引擎实例避免休眠</p></blockquote><p>因为任务唤醒体验版限制，关于定时任务设置跳过，解决方法参看下文<a href="#%E5%94%A4%E9%86%92%E4%BA%91%E5%BC%95%E6%93%8E">唤醒云引擎</a><br>6.邮件通知模板<br>邮件通知模板在云引擎环境变量中设定，可自定义通知邮件标题及内容模板。<br>默认的邮件通知模板是无法看到具体是哪篇文章的评论，这里简单进行了一下修改，如需样式定制，还请参看官方文档<br>环境变量：<strong>MAIL_TEMPLATE</strong><br>修改后被@通知邮件内容模板如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div style=&quot;border-top:2px solid #12ADDB;box-shadow:0 1px 3px #AAAAAA;line-height:180%;padding:0 15px 12px;margin:50px auto;font-size:12px;&quot;&gt;&lt;h2 style=&quot;border-bottom:1px solid #DDD;font-size:14px;font-weight:normal;padding:13px 0 10px 8px;&quot;&gt;您在&lt;a style=&quot;text-decoration:none;color: #12ADDB;&quot;href=&quot;$&#123;SITE_URL&#125;&quot;target=&quot;_blank&quot;&gt;$&#123;SITE_NAME&#125;&lt;/a&gt;上的评论有了新的回复&lt;/h2&gt;$&#123;PARENT_NICK&#125;同学，您曾发表评论：&lt;div style=&quot;padding:0 12px 0 12px;margin-top:18px&quot;&gt;&lt;div style=&quot;background-color: #f5f5f5;padding: 10px 15px;margin:18px 0;word-wrap:break-word;&quot;&gt;$&#123;PARENT_COMMENT&#125;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;$&#123;NICK&#125;&lt;/strong&gt;回复说：&lt;/p&gt;&lt;div style=&quot;background-color: #f5f5f5;padding: 10px 15px;margin:18px 0;word-wrap:break-word;&quot;&gt;$&#123;COMMENT&#125;&lt;/div&gt;&lt;p&gt;您可以点击&lt;a style=&quot;text-decoration:none; color:#12addb&quot;href=&quot;$&#123;POST_URL&#125;&quot;target=&quot;_blank&quot;&gt;查看回复的完整內容&lt;/a&gt;，欢迎再次光临&lt;a style=&quot;text-decoration:none; color:#12addb&quot;href=&quot;$&#123;SITE_URL&#125;&quot;target=&quot;_blank&quot;&gt;$&#123;SITE_NAME&#125;&lt;/a&gt;。&lt;br&gt;&lt;/p&gt;&lt;p&gt;详细链接：$&#123;POST_URL&#125;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>环境变量：<strong>MAIL_TEMPLATE_ADMIN</strong><br>修改后博主通知邮件内容模板如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div style=&quot;border-top:2px solid #12ADDB;box-shadow:0 1px 3px #AAAAAA;line-height:180%;padding:0 15px 12px;margin:50px auto;font-size:12px;&quot;&gt;&lt;h2 style=&quot;border-bottom:1px solid #DDD;font-size:14px;font-weight:normal;padding:13px 0 10px 8px;&quot;&gt;您在&lt;a style=&quot;text-decoration:none;color: #12ADDB;&quot; href=&quot;$&#123;SITE_URL&#125;&quot; target=&quot;_blank&quot;&gt;$&#123;SITE_NAME&#125;&lt;/a&gt;上的文章有了新的评论&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;$&#123;NICK&#125;&lt;/strong&gt;回复说：&lt;/p&gt;&lt;div style=&quot;background-color: #f5f5f5;padding: 10px 15px;margin:18px 0;word-wrap:break-word;&quot;&gt; $&#123;COMMENT&#125;&lt;/div&gt;&lt;p&gt;您可以点击&lt;a style=&quot;text-decoration:none; color:#12addb&quot; href=&quot;$&#123;POST_URL&#125;&quot; target=&quot;_blank&quot;&gt;查看回复的完整內容&lt;/a&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;详细链接：$&#123;POST_URL&#125;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>上述两个环境变量在云引擎手动添加即可，效果为在邮件最后一行添加评论详细链接，旨在快速定位是哪篇文章的评论。</p><p>其他功能这里也不过多介绍，感兴趣的请参看<a target="_blank" rel="noopener" href="https://deserts.io/valine-admin-document/">Valine Admin文档</a><br><strong>到此，valine进阶基本结束</strong>，详细内容还请参看官方文档。<br>接下来是如何唤醒云引擎</p><h3 id="唤醒云引擎"><a href="#唤醒云引擎" class="headerlink" title="唤醒云引擎"></a>唤醒云引擎</h3><p>参看leancloud官方公告<a target="_blank" rel="noopener" href="https://forum.leancloud.cn/t/topic/22595">关于对体验版云引擎定时任务进行适当流控的说明</a><br>官方根据服务器的负载，对定时任务添加流控，通过定时任务唤醒容器将有可能会失败<br>可以尝试更换定时任务时间，错开流控高峰，但是不治本。<br>这里提供一个激活云引擎的方法，参看：<a target="_blank" rel="noopener" href="https://crosschannel.cc/daily/valine-admin-autoAwaken.html">宅日记博客</a></p><blockquote><p>思路就是北京时间8点到晚上23点只要有人访问博客就会触发js发ajax请求唤醒云引擎。由于云引擎睡眠的时候发请求不一定会成功（但是有请求就会醒）所有没有做请求失败处理。请求发送后设置cookie避免20分钟内刷新等操作重复发请求。</p></blockquote><p>简单说明一下：<br>在valine.ejs文件中添加</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Valine</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>:<span class="string">&#x27;#valine&#x27;</span>,</span><br><span class="line">  ...</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;veditor&#x27;</span>).<span class="property">maxLength</span>=<span class="string">&#x27;&lt;%- theme.valine.maxLength %&gt;&#x27;</span>;</span><br><span class="line"><span class="comment">// 开始添加</span></span><br><span class="line">&lt;% <span class="keyword">if</span>(theme.<span class="property">valine</span>.<span class="property">ADMIN_URL</span>)&#123; %&gt;</span><br><span class="line"><span class="comment">// ADMIN_URL</span></span><br><span class="line"><span class="keyword">var</span> engine = <span class="variable language_">document</span>.<span class="property">cookie</span>.<span class="title function_">replace</span>(<span class="regexp">/(?:(?:^|.*;\s*)engine\s*\=\s*([^;]*).*$)|^.*$/</span>, <span class="string">&quot;$1&quot;</span>) || <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span>(engine!=<span class="string">&#x27;1&#x27;</span>) &#123;</span><br><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;https://quan.suning.com/getSysTime.do&#x27;</span>)</span><br><span class="line">.<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">response</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> response.<span class="title function_">json</span>();</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">date</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> hours = <span class="keyword">new</span> <span class="title class_">Date</span>(date.<span class="property">sysTime2</span>).<span class="title function_">getHours</span>();</span><br><span class="line">  <span class="keyword">if</span>(hours&gt;<span class="number">7</span> &amp;&amp; hours&lt;<span class="number">23</span>)&#123;</span><br><span class="line">  <span class="title function_">fetch</span>(<span class="string">&#x27;&lt;%- theme.valine.ADMIN_URL %&gt;&#x27;</span>);</span><br><span class="line">  <span class="keyword">var</span> exp = <span class="keyword">new</span> <span class="title class_">Date</span>(date.<span class="property">sysTime2</span>);</span><br><span class="line">  exp.<span class="title function_">setTime</span>(exp.<span class="title function_">getTime</span>() + <span class="number">20</span>*<span class="number">60</span>*<span class="number">1000</span>);</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">cookie</span> = <span class="string">&quot;engine=1;path=/;expires=&quot;</span>+ exp.<span class="title function_">toGMTString</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&lt;% &#125; %&gt;</span><br><span class="line"><span class="comment">// 添加结束</span></span><br></pre></td></tr></table></figure><p>通过fetch实现类似jquery的ajax请求（不需要引入jQuery），当有人访问带有valine评论的页面时，js请求你云引擎的地址，激活云引擎<br>如果你的云引擎地址没有允许跨域请求，控制台会报跨域错误（可以忽略），在控制台提示错误之前，浏览器已经请求了你的云引擎地址</p><p>如果你讨厌控制台报错，但是自己又不会改，建议直接部署 <a target="_blank" rel="noopener" href="https://crosschannel.cc/daily/valine-admin-autoAwaken.html">宅日记博客</a> 修改的 <a target="_blank" rel="noopener" href="https://github.com/track23/Valine-Admin">valine-admin</a> ，fork的是DesertsP写的valine-admin。</p><p>通过此机制达到激活云引擎的目的，云引擎激活后定时任务不会再遇到流控问题<br>你也可以尝试删除云引擎中的定时任务，只通过此方式激活云引擎<br>在主题配置文件valine的配置中添加<code>ADMIN_URL</code>字段设置云引擎地址，方便管理</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">valine:</span><br><span class="line">  ...</span><br><span class="line">  ADMIN_URL: false # Web主机二级域名，你的云引擎地址，若没有请设为false</span><br></pre></td></tr></table></figure><p>文中提到通过github action来定时唤醒云引擎，参看：<a target="_blank" rel="noopener" href="https://www.antmoe.com/posts/ff6aef7b/">小康博客</a><br>个人感觉有些复杂，没有实践，而且这个方法足够啦</p><h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>提到yilia主题，说说yilia主题内置的几个评论系统<br>yilia主题总共有5个评论可选，分别是：1、多说；2、网易云跟帖；3、畅言；4、Disqus；5、Gitment<br>简单介绍一下<br>多说和网易云跟帖服务已经关闭（可以自行在主题中删除相应代码），使用畅言博客域名需要备案。<br>Disqus仿佛是美国的，国内使用需要翻墙。Gitment就不过多介绍了，一般的主题都有<br>简单谈谈为什么用valine<br>1.免费<br>2.支持匿名评论，国内访问速度快，国际版账户不需要绑定域名<br>3.评论可以删除</p></div><div class="reprint" id="reprint-statement"><div class="reprint__author"><span class="reprint-meta" style="font-weight:700">文章作者: </span><span class="reprint-info"><a href="/" rel="external nofollow noreferrer">akbcd</a></span></div><div class="reprint__type"><span class="reprint-meta" style="font-weight:700">文章链接: </span><span class="reprint-info"><a href="https://akbcd.github.io/2020/04/22/yilia%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0valine%E8%AF%84%E8%AE%BA/">https://akbcd.github.io/2020/04/22/yilia主题添加valine评论/</a></span></div><div class="reprint__notice"><span class="reprint-meta" style="font-weight:700">版权声明: </span><span class="reprint-info">本博客所有文章除特別声明外，均采用 <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a> 许可协议。转载请注明来源 <a href="https://akbcd.github.io" target="_blank">akbcd</a> !</span></div></div></div><div class="article-info article-info-index"><div class="article-tag tagcloud"><i class="icon-price-tags icon"></i><ul class="article-tag-list"><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag article-tag-list-link color3">博客</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag article-tag-list-link color5">hexo</a></li></ul></div><div class="share-btn share-icons tooltip-left"><div class="tooltip tooltip-east"><span class="tooltip-item"><a style="cursor:pointer" class="share-sns share-outer"><i class="icon icon-share"></i> </a></span><span class="tooltip-content"><div class="share-wrap"><div class="share-icons"><a class="weibo share-sns" style="cursor:pointer" data-type="weibo" title="weibo"><i class="icon icon-weibo"></i> </a><a class="weixin share-sns wxFab" style="cursor:pointer" data-type="weixin" title="weixin"><i class="icon icon-weixin"></i> </a><a class="qq share-sns" style="cursor:pointer" data-type="qq" title="qq"><i class="icon icon-qq"></i> </a><a class="douban share-sns" style="cursor:pointer" data-type="douban" title="douban"><i class="icon icon-douban"></i> </a><a class="qzone share-sns" style="cursor:pointer" data-type="qzone" title="qzone"><i class="icon icon-qzone"></i> </a><a class="facebook share-sns" style="cursor:pointer" data-type="facebook" title="facebook"><i class="icon icon-facebook"></i> </a><a class="twitter share-sns" style="cursor:pointer" data-type="twitter" title="twitter"><i class="icon icon-twitter"></i> </a><a class="google share-sns" style="cursor:pointer" data-type="google" title="google"><i class="icon icon-google"></i></a></div></div></span></div></div><div class="page-modal wx-share js-wx-box"><a class="close js-modal-close" style="cursor:pointer"><i class="icon icon-close"></i></a><p>扫一扫，分享到微信</p><div class="wx-qrcode"><img src="//api.qrserver.com/v1/create-qr-code/?data=https://akbcd.github.io/2020/04/22/yilia%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0valine%E8%AF%84%E8%AE%BA/" alt="微信分享二维码"></div></div><div class="mask js-mask"></div><div class="clearfix"></div></div></div></article><nav id="article-nav"><a href="/2020/04/24/eclipse%E5%AE%89%E8%A3%85%E4%B8%8E%E6%B5%8B%E8%AF%95/" id="article-nav-newer" class="article-nav-link-wrap"><i class="icon-circle-left"></i><div class="article-nav-title">eclipse安装与测试</div></a><a href="/2020/04/18/javascript%E8%AF%BB%E5%8F%96txt%E6%96%87%E4%BB%B6/" id="article-nav-older" class="article-nav-link-wrap"><div class="article-nav-title">javascript读取txt文件</div><i class="icon-circle-right"></i></a></nav><aside class="wrap-side-operation"><div class="mod-side-operation"><div class="jump-container" id="js-jump-container" style="display:none"><i class="icon-font icon-back"></i></div><div class="toc-container tooltip-left"><i class="icon-font icon-category"></i><div class="tooltip tooltip-east"><span class="tooltip-item"></span> <span class="tooltip-content"><div class="toc-article"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B"><span class="toc-number">1.</span> <span class="toc-text">快速开始</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0valine%E8%AF%84%E8%AE%BA%E6%A8%A1%E5%9D%97"><span class="toc-number">2.</span> <span class="toc-text">主题添加valine评论模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8valine"><span class="toc-number">3.</span> <span class="toc-text">使用valine</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8valine%E8%AF%84%E8%AE%BA%E7%9A%84%E6%96%87%E7%AB%A0%E9%98%85%E8%AF%BB%E9%87%8F%E7%BB%9F%E8%AE%A1%E5%8A%9F%E8%83%BD"><span class="toc-number">4.</span> <span class="toc-text">使用valine评论的文章阅读量统计功能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE"><span class="toc-number">4.1.</span> <span class="toc-text">配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#valine%E8%BF%9B%E9%98%B6"><span class="toc-number">5.</span> <span class="toc-text">valine进阶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%94%A4%E9%86%92%E4%BA%91%E5%BC%95%E6%93%8E"><span class="toc-number">5.1.</span> <span class="toc-text">唤醒云引擎</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%80%E5%90%8E"><span class="toc-number">6.</span> <span class="toc-text">最后</span></a></li></ol></div></span></div></div></div></aside><div id="article-comments"></div></div></div></div><footer id="footer"><div class="outer"><div id="footer-info"><div class="footer-left">&copy; 2025 akbcd</div><div class="footer-right"><a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten</div></div></div></footer></div><div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)"><div class="tools-nav header-menu"><ul style="width:70%"><li style="width:50%" q-on="click: openSlider(e, 'innerArchive')"><a style="cursor:pointer" q-class="active:innerArchive">所有文章</a></li><li style="width:50%" q-on="click: openSlider(e, 'friends')"><a style="cursor:pointer" q-class="active:friends">友链</a></li></ul></div><div class="tools-wrap"><section class="tools-section tools-section-all" q-show="innerArchive"><div class="search-wrap"><input class="search-ipt" q-model="search" type="text" placeholder="查找文章..."> <i class="icon-search icon" q-show="search|isEmptyStr" id="js-icon-search"></i> <i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i></div><div class="widget tagcloud search-tag"><p class="search-tag-wording">标签：</p><label class="search-switch"><input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags" aria-label="showTags"></label><ul class="article-tag-list" q-show="showTags"><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color3">博客</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color5">hexo</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color2">github</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color3">笔记</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color3">教程</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color3">随笔</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color3">大学</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color3">vm</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color1">linux</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color5">html</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color3">js</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color3">mybatis</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color2">java基础</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color4">sql</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color4">jsp</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color3">bt</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color5">springMVC</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color1">PowerShell</a></li><li><div class="clearfix"></div></li></ul></div><ul class="search-ul"><li><p q-show="jsonFail" style="padding:20px 20px 0 20px;font-size:12px">缺失模块。<br>1、请确保node版本大于6.2<br>2、在博客根目录（注意不是yilia根目录）执行以下命令：<br>npm i hexo-generator-json-content --save<br>3、在根目录_config.yml里添加配置：</p></li><li><pre style="font-size:12px;padding-left:20px" q-show="jsonFail">
jsonContent:
  meta: false
  pages: false
  posts:
    title: true
    date: true
    path: true
    text: false
    raw: false
    content: false
    slug: false
    updated: false
    comments: false
    link: false
    permalink: false
    excerpt: false
    categories: false
    tags: true
            </pre></li><li class="search-li" q-repeat="items" q-show="isShow"><a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a><p class="search-time"><i class="icon-calendar icon"></i> <span q-text="date|dateformat"></span></p><p class="search-tag"><i class="icon-price-tags icon"></i> <span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span></p></li></ul></section><section class="tools-section tools-section-friends" q-show="friends"><ul class="search-ul"><li class="search-li"><a href="http://tool.mkblog.cn/tuchuang/" target="_blank" title="聚合图床 - 微博图床" class="search-title"><i class="icon-quo-left icon"></i>聚合图床 - 微博图床</a></li><li class="search-li"><a href="https://c.runoob.com/" target="_blank" title="菜鸟工具 - 不止于工具" class="search-title"><i class="icon-quo-left icon"></i>菜鸟工具 - 不止于工具</a></li><li class="search-li"><a href="https://tool.css-js.com/" target="_blank" title="CSS, JavaScript 压缩, 美化, 加密, 解密" class="search-title"><i class="icon-quo-left icon"></i>CSS, JavaScript 压缩, 美化, 加密, 解密</a></li><li class="search-li"><a href="https://www.gequbao.com/" target="_blank" title="歌曲宝" class="search-title"><i class="icon-quo-left icon"></i>歌曲宝</a></li><li class="search-li"><a href="http://tool.mkblog.cn/github/" target="_blank" title="GitHub加速下载工具" class="search-title"><i class="icon-quo-left icon"></i>GitHub加速下载工具</a></li><li class="search-li"><a href="https://www.7acg.com/" target="_blank" title="在线动画 动漫下载 - AGE动漫" class="search-title"><i class="icon-quo-left icon"></i>在线动画 动漫下载 - AGE动漫</a></li><li class="search-li"><a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank" title="hexo-theme-matery主题" class="search-title"><i class="icon-quo-left icon"></i>hexo-theme-matery主题</a></li></ul></section></div></div><div class="pswp" tabindex="-1" role="dialog" aria-hidden="true"><div class="pswp__bg"></div><div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div><div class="pswp__item"></div><div class="pswp__item"></div></div><div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div><button type="button" class="pswp__button pswp__button--close" title="Close (Esc)"></button> <button type="button" class="pswp__button pswp__button--share" style="display:none" title="Share"></button> <button type="button" class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button> <button type="button" class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div><button type="button" class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button> <button type="button" class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div><script src="/js/lib/photoswipe/photoswipe.min.js"></script><script src="/js/lib/photoswipe/photoswipe-ui-default.min.js"></script><script src="/js/lib/clipboard/clipboard.min.js"></script><script src="/js/copyFn.js"></script><script>copyFn("复制","复制成功","复制失败")</script><script async src="/js/backTop.js"></script><script async src="/js/share.js"></script><script async src="/js/anm.js"></script><script async src="/js/fix.js"></script><script async src="/js/slider.js"></script><script async src="/js/addHighlightTool.js"></script><script src="/js/viewer.js"></script><script src="/js/mobile.js"></script></div></body></html>