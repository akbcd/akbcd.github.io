!function(){const backTop=function(domE,ctn,distance){if(domE){var _onscroll=window.onscroll,_onclick=domE.onclick;ctn.onscroll=throttle((function(){"function"==typeof _onscroll&&_onscroll.apply(this,arguments),toggleDomE()}),100),window.onscroll=ctn.onscroll,domE.onclick=function(){let timer=null;"function"==typeof _onclick&&_onclick.apply(this,arguments),timer=setInterval((function(){var ct=ctn.scrollTop||document.documentElement.scrollTop||document.body.scrollTop,diff=Math.max(10,ct/6);(ct-=diff)>0?(ctn.scrollTop=ctn.scrollTop-diff,window.scrollTo(0,ct)):(ctn.scrollTop=0,window.scrollTo(0,0),clearInterval(timer))}),10)}}function toggleDomE(){domE.style.display=(ctn.scrollTop||document.documentElement.scrollTop||document.body.scrollTop)>distance?"block":"none"}function throttle(func,wait){let timer=null;return function(){var self=this,args=arguments;timer&&clearTimeout(timer),timer=setTimeout((function(){return"function"==typeof func&&func.apply(self,args)}),wait)}}};function Viwer(){let pswpElement=document.querySelectorAll(".pswp")[0],$imgArr=document.querySelectorAll(".article-entry img:not(.reward-img)");$imgArr.forEach(($em,i)=>{$em.onclick=()=>{if(document.querySelector(".left-col.show"))return;let items=[];var gallery;$imgArr.forEach(($em2,i2)=>{let img=$em2.getAttribute("data-idx",i2),src=$em2.getAttribute("data-target")||$em2.getAttribute("src"),title=$em2.getAttribute("alt");const image=new Image;image.src=src,items.push({src:src,w:image.width||$em2.width,h:image.height||$em2.height,title:title})}),new PhotoSwipe(pswpElement,PhotoSwipeUI_Default,items,{index:parseInt(i)}).init()}})}backTop(document.getElementById("js-jump-container"),document.getElementById("container"),500),function share(){function generate(url,opts){var url=url.replace(/<%-sUrl%>/g,encodeURIComponent(opts.sUrl)).replace(/<%-sTitle%>/g,opts.sTitle).replace(/<%-sDesc%>/g,opts.sDesc).replace(/<%-sPic%>/g,encodeURIComponent(opts.sPic));window.open(url)}function showWX(){let $wx=document.querySelector(".js-wx-box"),$mask=document.querySelector(".mask");$wx.classList.add("in"),$wx.classList.add("ready"),$mask.classList.add("in")}function hideWX(){let $wx=document.querySelector(".js-wx-box"),$mask=document.querySelector(".mask");$wx.classList.remove("in"),$wx.classList.remove("ready"),$mask.classList.remove("in")}function handleClick(type,opts){"weibo"===type?generate("http://service.weibo.com/share/share.php?url=<%-sUrl%>&title=<%-sTitle%>&pic=<%-sPic%>",opts):"qq"===type?generate("http://connect.qq.com/widget/shareqq/index.html?url=<%-sUrl%>&title=<%-sTitle%>&source=<%-sDesc%>",opts):"douban"===type?generate("https://www.douban.com/share/service?image=<%-sPic%>&href=<%-sUrl%>&name=<%-sTitle%>&text=<%-sDesc%>",opts):"qzone"===type?generate("http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=<%-sUrl%>&title=<%-sTitle%>&pics=<%-sPic%>&summary=<%-sDesc%>",opts):"facebook"===type?generate("https://www.facebook.com/sharer/sharer.php?u=<%-sUrl%>",opts):"twitter"===type?generate("https://twitter.com/intent/tweet?text=<%-sTitle%>&url=<%-sUrl%>&via=<%-config.url%>",opts):"google"===type?generate("https://plus.google.com/share?url=<%-sUrl%>",opts):"weixin"===type&&showWX()}let $sns=document.querySelectorAll(".share-sns");if(!$sns||0===$sns.length)return;let sUrl=window.location.href,sTitle=document.querySelector("title").innerHTML,$img,sPic=document.querySelectorAll(".article-entry img").length?document.querySelector(".article-entry img").getAttribute("src"):"";""===sPic||/^(http:|https:)?\/\//.test(sPic)||(sPic=window.location.origin+sPic),$sns.forEach($em=>{$em.onclick=e=>{let type;handleClick($em.getAttribute("data-type"),{sUrl:sUrl,sPic:sPic,sTitle:sTitle,sDesc:sTitle})}}),document.querySelector(".mask").onclick=hideWX,document.querySelector(".js-modal-close").onclick=hideWX}(),function fix(){yiliaConfig&&yiliaConfig.open_in_new&&(document.querySelectorAll(".article-title,.article-more-a,.archive-article-date,.archive-article-title").forEach(i=>{i.setAttribute("target","_blank")}),yiliaConfig.isPost&&document.querySelectorAll(".article-title,.archive-article-date").forEach(i=>{i.removeAttribute("target")}));var $aboutme=document.querySelector("#js-aboutme");$aboutme&&0!==$aboutme.length&&($aboutme.innerHTML=$aboutme.innerText)}(),window.addEventListener("load",Viwer());const scrollFnToDo=function(){const $container=document.getElementById("container");if(yiliaConfig.isPost){if(!document.getElementsByClassName("toc-container")[0])return;const $article_content=document.getElementsByClassName("article-content")[0],toc_hide_index=yiliaConfig.toc_hide_index,isanchor=yiliaConfig.anchor;let $toc_link,$toc_article,autoScrollToc;if($toc_link=document.getElementsByClassName("toc-link"),$toc_article=document.getElementsByClassName("toc-article")[0],!$toc_link[0])return;if(toc_hide_index){let $a;document.querySelectorAll(".toc-number").forEach($em=>{$em.style.display="none"})}function getElementTop(element){let actualTop=element.offsetTop,current=element.offsetParent;for(;null!==current;)actualTop+=current.offsetTop,current=current.offsetParent;return actualTop}const updateAnchor=function(anchor){if(anchor!==window.location.hash){anchor||(anchor=location.pathname);const title=document.title;window.history.replaceState({url:location.href,title:title},title,anchor)}};function toToc(name){const $name=document.getElementById(name.substring(1)),scrollPositionTop=getElementTop($name);$container.scrollTo({behavior:"smooth",top:document.body.clientWidth<=800?scrollPositionTop-50:scrollPositionTop}),window.scrollTo({behavior:"smooth",top:scrollPositionTop-50})}$toc_article.addEventListener("click",e=>{e.preventDefault();const target=e.target.classList;if(target.contains("toc-article")||target.contains("toc-item"))return;const $target=target.contains("toc-link")?e.target:e.target.parentElement;toToc(decodeURI($target.getAttribute("href")))}),autoScrollToc=item=>{const activeTop=item.getBoundingClientRect().top;if(!item.offsetParent)return;const activeParentTop=item.offsetParent.getBoundingClientRect().top,activePosition=activeTop-activeParentTop,articleScrolltop=$toc_article.scrollTop;activePosition>$toc_article.clientHeight-50&&($toc_article.scrollTop=articleScrolltop+150),activePosition<50&&($toc_article.scrollTop=articleScrolltop-150,activePosition<0&&($toc_article.scrollTop=0))};const list=$article_content.querySelectorAll("h1,h2,h3,h4,h5,h6");let detectItem="";const findHeadPosition=function(top){if(0===top)return;let currentId="",currentIndex="";if(list.forEach((function(ele,index){if(top>getElementTop(ele)-10){const id=ele.id;currentId=id?"#"+encodeURI(id):"",currentIndex=index}})),detectItem===currentIndex)return;if(isanchor&&updateAnchor(currentId),detectItem=currentIndex,$toc_article.querySelectorAll(".active").forEach(i=>{i.classList.remove("active")}),""===currentId)return;const currentActive=$toc_link[currentIndex];currentActive.classList.add("active"),setTimeout(()=>{autoScrollToc(currentActive)},0);let parent=currentActive.parentNode;for(;!parent.matches(".toc");parent=parent.parentNode)parent.matches("li")&&parent.classList.add("active")};$container.addEventListener("scroll",e=>{const currentTop=$container.scrollTop;findHeadPosition(document.body.clientWidth<=800?currentTop+50:currentTop)}),window.addEventListener("scroll",e=>{const currentTop=document.body.scrollTop||document.documentElement.scrollTop;findHeadPosition(currentTop+50)})}yiliaConfig.isPost&&yiliaConfig.scrollPos&&(window.onbeforeunload=function(){const scrollPos=$container.scrollTop||document.documentElement.scrollTop||document.body.scrollTop;document.cookie="scrollTop="+scrollPos},window.onpagehide=function(){const scrollPos=$container.scrollTop||document.documentElement.scrollTop||document.body.scrollTop;document.cookie="scrollTop="+scrollPos},window.addEventListener("load",(function(){if(null!=document.cookie.match(/scrollTop=([^;]+)(;|$)/)){const arr=document.cookie.match(/scrollTop=([^;]+)(;|$)/);parseInt(arr[1])>0&&($container.scrollTop=parseInt(arr[1]),document.documentElement.scrollTop=parseInt(arr[1]),document.body.scrollTop=parseInt(arr[1]))}})))};scrollFnToDo()}();