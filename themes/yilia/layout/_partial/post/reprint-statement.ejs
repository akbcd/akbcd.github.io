<%
let reprintPolicyEnabled = theme.reprint && theme.reprint.enable;
let reprintPolicy = page.reprintPolicy || theme.reprint.default || 'cc_by';
%>
<% if (reprintPolicyEnabled && !index) { %>
<div class="reprint" id="reprint-statement">
  <% if (reprintPolicy === 'cc_by') { %>
  <div class="reprint__author">
    <span class="reprint-meta" style="font-weight: bold;">
      <%= __('author') %>:
    </span>
    <span class="reprint-info">
      <a href="<%- url_for('/') %>" rel="external nofollow noreferrer"><%- page.author || config.author %></a>
    </span>
  </div>
  <div class="reprint__type">
    <span class="reprint-meta" style="font-weight: bold;">
      <%= __('link') %>:
    </span>
    <span class="reprint-info">
      <a href="<%- config.url %><%- url_for(page.path) %>"><%- config.url %><%- decodeURI(url_for(page.path)) %></a>
    </span>
  </div>
  <div class="reprint__notice">
    <span class="reprint-meta" style="font-weight: bold;">
      <%= __('reprint') %>:
    </span>
    <span class="reprint-info">
      <%= __('use') %>
      <a href="<%= __('cc_by_url') %>" rel="external nofollow noreferrer" target="_blank"><%= __('cc_by_name') %></a>
      <%= __('licensed') %>
      <a href="<%- config.url %>" target="_blank"><%- page.author || config.author %></a>
      !
    </span>
  </div>
  <% } else if (reprintPolicy === 'cc_by_nd') { %>
  <div class="reprint__author">
    <span class="reprint-meta" style="font-weight: bold;">
      <%= __('author') %>:
    </span>
    <span class="reprint-info">
      <a href="<%- url_for('/') %>" rel="external nofollow noreferrer"><%- page.author || config.author %></a>
    </span>
  </div>
  <div class="reprint__type">
    <span class="reprint-meta" style="font-weight: bold;">
      <%= __('link') %>:
    </span>
    <span class="reprint-info">
      <a href="<%- config.url %><%- url_for(page.path) %>"><%- config.url %><%- decodeURI(url_for(page.path)) %></a>
    </span>
  </div>
  <div class="reprint__notice">
    <span class="reprint-meta" style="font-weight: bold;">
      <%= __('reprint') %>:
    </span>
    <span class="reprint-info">
      <%= __('use') %>
      <a href="<%= __('cc_by_nd_url') %>" rel="external nofollow noreferrer" target="_blank"><%= __('cc_by_nd_name') %></a>
      <%= __('licensed') %>
      <a href="<%- config.url %>" target="_blank"><%- page.author || config.author %></a>
      !
    </span>
  </div>
  <% } else if (reprintPolicy === 'cc_by_sa') { %>
  <div class="reprint__author">
    <span class="reprint-meta" style="font-weight: bold;">
      <%= __('author') %>:
    </span>
    <span class="reprint-info">
      <a href="<%- url_for('/') %>" rel="external nofollow noreferrer"><%- page.author || config.author %></a>
    </span>
  </div>
  <div class="reprint__type">
    <span class="reprint-meta" style="font-weight: bold;">
      <%= __('link') %>:
    </span>
    <span class="reprint-info">
      <a href="<%- config.url %><%- url_for(page.path) %>"><%- config.url %><%- decodeURI(url_for(page.path)) %></a>
    </span>
  </div>
  <div class="reprint__notice">
    <span class="reprint-meta" style="font-weight: bold;">
      <%= __('reprint') %>:
    </span>
    <span class="reprint-info">
      <%= __('use') %>
      <a href="<%= __('cc_by_sa_url') %>" rel="external nofollow noreferrer" target="_blank"><%= __('cc_by_sa_name') %></a>
      <%= __('licensed') %>
      <a href="<%- config.url %>" target="_blank"><%- page.author || config.author %></a>
      !
    </span>
  </div>
  <% } else if (reprintPolicy === 'cc_by_nc') { %>
  <div class="reprint__author">
    <span class="reprint-meta" style="font-weight: bold;">
      <%= __('author') %>:
    </span>
    <span class="reprint-info">
      <a href="<%- url_for('/') %>" rel="external nofollow noreferrer"><%- page.author || config.author %></a>
    </span>
  </div>
  <div class="reprint__type">
    <span class="reprint-meta" style="font-weight: bold;">
      <%= __('link') %>:
    </span>
    <span class="reprint-info">
      <a href="<%- config.url %><%- url_for(page.path) %>"><%- config.url %><%- decodeURI(url_for(page.path)) %></a>
    </span>
  </div>
  <div class="reprint__notice">
    <span class="reprint-meta" style="font-weight: bold;">
      <%= __('reprint') %>:
    </span>
    <span class="reprint-info">
      <%= __('use') %>
      <a href="<%= __('cc_by_nc_url') %>" rel="external nofollow noreferrer" target="_blank"><%= __('cc_by_nc_name') %></a>
      <%= __('licensed') %>
      <a href="<%- config.url %>" target="_blank"><%- page.author || config.author %></a>
      !
    </span>
  </div>
  <% } else if (reprintPolicy === 'cc_by_nc_nd') { %>
  <div class="reprint__author">
    <span class="reprint-meta" style="font-weight: bold;">
      <%= __('author') %>:
    </span>
    <span class="reprint-info">
      <a href="<%- url_for('/') %>" rel="external nofollow noreferrer"><%- page.author || config.author %></a>
    </span>
  </div>
  <div class="reprint__type">
    <span class="reprint-meta" style="font-weight: bold;">
      <%= __('link') %>:
    </span>
    <span class="reprint-info">
      <a href="<%- config.url %><%- url_for(page.path) %>"><%- config.url %><%- decodeURI(url_for(page.path)) %></a>
    </span>
  </div>
  <div class="reprint__notice">
    <span class="reprint-meta" style="font-weight: bold;">
      <%= __('reprint') %>:
  </span>
  <span class="reprint-info">
    <%= __('use') %>
    <a href="<%= __('cc_by_nc_nd_url') %>" rel="external nofollow noreferrer" target="_blank"><%= __('cc_by_nc_nd_name') %></a>
    <%= __('licensed') %>
    <a href="<%- config.url %>" target="_blank"><%- page.author || config.author %></a>
    !
  </span>
  </div>
  <% } else if (reprintPolicy === 'cc_by_nc_sa') { %>
  <div class="reprint__author">
    <span class="reprint-meta" style="font-weight: bold;">
      <%= __('author') %>:
    </span>
    <span class="reprint-info">
      <a href="<%- url_for('/') %>" rel="external nofollow noreferrer"><%- page.author || config.author %></a>
    </span>
  </div>
  <div class="reprint__type">
    <span class="reprint-meta" style="font-weight: bold;">
      <%= __('link') %>:
    </span>
    <span class="reprint-info">
      <a href="<%- config.url %><%- url_for(page.path) %>"><%- config.url %><%- decodeURI(url_for(page.path)) %></a>
    </span>
  </div>
  <div class="reprint__notice">
    <span class="reprint-meta" style="font-weight: bold;">
      <%= __('reprint') %>:
    </span>
    <span class="reprint-info">
      <%= __('use') %>
      <a href="<%= __('cc_by_nc_sa_url') %>" rel="external nofollow noreferrer" target="_blank"><%= __('cc_by_nc_sa_name') %></a>
      <%= __('licensed') %>
      <a href="<%- config.url %>" target="_blank"><%- page.author || config.author %></a>
      !
    </span>
  </div>
  <% } else if (reprintPolicy === 'cc0') { %>
  <%= __('toTheExtentPossibleUnderLaw') %>
  <a href="<%- config.url %>">
    <%- page.author || config.author %>
  </a>
  <%= __('hasWaivedAllCopyrightAndRelatedOrNeighboringRightsTo') %>
  <a  href="<%- url_for(page.path) %>">
    《<%= page.title %>》
  </a>
  <%= __('workPublishedFrom') %>
  <span property="vcard:Country" datatype="dct:ISO3166"
    content="<%= __('cc_0_content') %>" about="<%- url_for(page.path) %>">
    <%= __('cc_0_country') %>
  </span>
  <% } else if (reprintPolicy === 'noreprint') { %>
  <span>
    <%= __('noreprint') %>
  </span>
  <% } else if (reprintPolicy === 'pay') { %>
  <%= __('paycontact') %>
  <span class="reprint-info">
    <a href="<%- config.url %>" rel="external nofollow noreferrer"><%- page.author || config.author %></a>
  </span>
  <%= __('payreprint') %>
  <% } %>
</div>
<% } %>
<% if (theme.copyright.enable && !index) { %>
<script>
  document.getElementById('article-content').addEventListener('copy', function (e) {
    // IE8 or earlier browser is 'undefined'
    if (typeof window.getSelection === 'undefined') return;
    var selection = window.getSelection();
    // if the selection is short let's not annoy our users.
    if (('' + selection).length < Number.parseInt('<%- theme.copyright.minCharNumber %>')) {
      return;
    }
    // create a div outside of the visible area and fill it with the selected text.
    var bodyElement = document.getElementsByTagName('body')[0];
    var newdiv = document.createElement('div');
    newdiv.style.position = 'absolute';
    newdiv.style.left = '-99999px';
    bodyElement.appendChild(newdiv);
    newdiv.appendChild(selection.getRangeAt(0).cloneContents());
    // we need a <pre> tag workaround.
    // otherwise the text inside "pre" loses all the line breaks!
    if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE') {
      newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
    }
    var url = document.location.href;
    newdiv.innerHTML += '<br />'
      + '<%- __("from")  %>: <%= config.title %><br />'
      + '<%- __("author")  %>: <%= config.author %><br />'
      + '<%- __("link")  %>: <a href="' + decodeURI(url) + '">' + decodeURI(url) + '</a><br />'
      + '<%- theme.copyright.description %>';
    selection.selectAllChildren(newdiv);
    window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
  });
</script>
<% } %>