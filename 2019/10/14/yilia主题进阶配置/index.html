<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="renderer" content="webkit"><meta name="viewport" content="width=device-width"><title>yilia主题进阶配置 | akbcd博客</title><meta name="keywords" content="yilia主题进阶配置, akbcd"><meta name="description" content="这篇文章添加几个适用于yilia主题的功能"><meta property="og:type" content="article"><meta property="og:title" content="yilia主题进阶配置"><meta property="og:url" content="https://akbcd.github.io/2019/10/14/yilia%E4%B8%BB%E9%A2%98%E8%BF%9B%E9%98%B6%E9%85%8D%E7%BD%AE/index.html"><meta property="og:site_name" content="akbcd博客"><meta property="og:description" content="这篇文章添加几个适用于yilia主题的功能"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://tva1.sinaimg.cn/large/007X8olVly1g8asepxgnbj30kj09yqbv.jpg"><meta property="og:image" content="https://tva1.sinaimg.cn/large/007X8olVly1g8asf74sq6j30ci0k67dj.jpg"><meta property="og:image" content="https://tva1.sinaimg.cn/large/007X8olVly1g8ash8bd5kj308902pa9u.jpg"><meta property="article:published_time" content="2019-10-14T03:13:55.000Z"><meta property="article:modified_time" content="2019-10-14T03:13:55.000Z"><meta property="article:author" content="akbcd"><meta property="article:tag" content="博客"><meta property="article:tag" content="hexo"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://tva1.sinaimg.cn/large/007X8olVly1g8asepxgnbj30kj09yqbv.jpg"><link rel="dns-prefetch" href="https://akbcd.github.io"><link rel="preload" href="/css/main.css" as="style"><link rel="preload" href="/css/mobile.css" as="style"><link rel="preload" href="/css/iconfont.css" as="style"><link rel="preload" href="/css/com.css" as="style"><link rel="preload" href="/css/lib/photoswipe/photoswipe.css" as="style"><link rel="preload" href="/css/lib/photoswipe/default-skin/default-skin.css" as="style"><link rel="preload" href="/css/lib/APlayer/APlayer.min.css" as="style"><link rel="preload" href="/js/Util.js" as="script"><link rel="preload" href="/js/lib/photoswipe/photoswipe.min.js" as="script"><link rel="preload" href="/js/lib/photoswipe/photoswipe-ui-default.min.js" as="script"><link rel="preload" href="/js/lib/clipboard/clipboard.min.js" as="script"><link rel="preload" href="/js/backTop.js" as="script"><link rel="preload" href="/js/share.js" as="script"><link rel="preload" href="/js/anm.js" as="script"><link rel="preload" href="/js/fix.js" as="script"><link rel="preload" href="/js/slider.js" as="script"><link rel="preload" href="/js/addHighlightTool.js" as="script"><link rel="preload" href="/js/viewer.js" as="script"><link rel="preload" href="/js/mobile.js" as="script"><link rel="icon" href="/img/avatar.webp"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/css/mobile.css"><link rel="stylesheet" href="/css/iconfont.css"><link rel="stylesheet" href="/css/com.css"><link rel="stylesheet" href="/css/lib/photoswipe/photoswipe.css"><link rel="stylesheet" href="/css/lib/photoswipe/default-skin/default-skin.css"><link rel="stylesheet" type="text/css" href="/css/lib/APlayer/APlayer.min.css"><style type="text/css">#aplayer ::-webkit-scrollbar-button,#aplayer ::-webkit-scrollbar-track{display:none}</style><style type="text/css">#container.show,#js-searchModal{background:linear-gradient(200deg,#a0cfe4,#e8c37e)}</style><script>var yiliaConfig={mathjax:!1,isHome:!1,isPost:!0,isArchive:!1,isTag:!1,isCategory:!1,open_in_new:!1,toc_hide_index:!0,root:"/",innerArchive:!0,showTags:!1,anchor:!0,scrollPos:!0,highlight:JSON.parse('{"highlight_lang":true,"highlight_show":true}')}</script><script src="/js/Util.js"></script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="js-searchModal"><div style="padding:24px"><div class="search-header"><span><i class="icon-search icon"></i>&nbsp;&nbsp;搜索</span> <input class="search-ipt" type="text" placeholder="请输入搜索的关键字" id="js-searchInput"> <i class="icon-close icon" id="js-searchTextCancel"></i></div><div id="js-searchResult"></div></div><script src="/js/search.js"></script><script type="text/javascript">window.addEventListener("DOMContentLoaded",function(){document.getElementById("js-icon-search").setAttribute("title","搜索"),searchFunc("/search.xml","js-searchInput","js-searchResult")})</script></div><div id="js-modal-overlay"></div><div id="container" q-class="show:isCtnShow"><canvas id="anm-canvas" class="anm-canvas"></canvas><div class="left-col" q-class="show:isShow"><div class="overlay" style="background:#4d4d4d"></div><div class="intrude-less"><header class="header-inner"><a href="/" class="profilepic"><img src="/img/avatar.webp" class="js-avatar" alt="avatar"></a><hgroup><h1 class="header-author"><a href="/" aria-label="root"></a></h1></hgroup><nav class="header-menu"><ul><li><a href="/">主页</a></li><li><a href="/archives/">归档</a></li><li><a href="/tags/%E9%9A%8F%E7%AC%94/">随笔</a></li></ul></nav><nav class="header-smart-menu"><a q-on="click: openSlider(e, 'innerArchive')" style="cursor:pointer">所有文章</a> <a q-on="click: openSlider(e, 'friends')" style="cursor:pointer">友链</a></nav><nav class="header-nav"><div class="social"><a class="mail" target="_blank" href="mailto:2226227487@qq.com" title="mail"><i class="icon-mail"></i></a> <a class="gitee" target="_blank" href="https://gitee.com/akbcd/hexo-theme-yilia" title="gitee"><i class="icon-gitee"></i></a></div><script src="/js/lib/APlayer/APlayer.min.js"></script><div class="music-player"><div id="aplayer"></div><script>const ap = new APlayer({
        container: document.getElementById('aplayer'),
        fixed: 'true' === 'true',
        autoplay: 'false' === 'true',
        theme: '#4d4d4d',
        loop: 'one',
        order: 'random',
        preload: 'none',
        lrcType: Number('0'),
        volume: Number('0.7'),
        listFolded: 'true' === 'true',
        listMaxHeight: '96px',
        audio: JSON.parse('[{"name":"消えない想い","artist":"芳賀敬太","lrc":"[00:00.00]纯音乐，无歌词","cover":"//p2.music.126.net/U9d0tMpFwxCD2hj03KXLiA==/5907675976380960.jpg","url":"/music/消えない想い - 芳賀敬太.mp3"},{"name":"騎士王の誇り","artist":"川井憲次","lrc":"[00:00.00]纯音乐，无歌词","cover":"//p2.music.126.net/U0Tf2ESHBauv2F9t1PgEZA==/109951163339713541.jpg","url":"/music/騎士王の誇り - 川井憲次.mp3"},{"name":"春はゆく","artist":"Aimer","lrc":"[00:00.00]春はゆく - Aimer[00:05.00] 剧场版《Fate/stay night 「Heaven’s Feel」III.spring song》主题曲[00:10.00] 作曲 : Yuki Kajiura[00:15.00] 作词 : Yuki Kajiura[00:20.61] 编曲：梶浦由記[00:26.59]それでも手を取って（即使如此你仍愿意牵起我的手）[00:32.66]隣に佇んで（在我的身边半步不离）[00:38.61]初めて抱きしめた形（第一次得到了真正的拥抱）[00:50.57]欲張って（忍不住萌生的贪念）[00:53.54]哀しみを抱えすぎていたから（心中所怀的悲伤已太过深刻）[01:02.56]幸せは何処にも（所以无论身在何方）[01:08.51]もう持ちきれなくて（都无法将幸福维持）[01:14.50]花びらを散らした風が（风吹散了花瓣）[01:20.53]扉を開いて 変わる季節（吹开了心扉 改变了季节）[01:39.37]深々と降り積もる時の中（悄无声息不断堆积的时光中）[01:45.34]歓びも苦しみも等しく（无论欢乐还是悲痛）[01:51.26]二人の手のひらで溶けてゆく（都平等地在你我掌心融化）[01:57.33]微笑みも贖いもあなたの側で（微笑也好 赎罪也罢 都只为留在你的身边）[02:14.60]消え去ってゆくことも（连独自消失离开）[02:20.56]ひとりではできなくて（都无法做到的我）[02:26.56]弱虫で身勝手な私（是如此懦弱而自私）[02:38.53]償えない影を背負って（背负着难以赎清的罪孽的阴影）[02:44.53]約束の場所は花の盛り（我们约好的地点已有繁花盛开）[02:57.28]罪も愛も顧みず 春はゆく（不顾罪孽与爱 春日终将逝去）[03:03.28]輝きはただ空に眩しく（只剩下点点亮光还在空中闪耀）[03:09.40]私を許さないでいてくれる（请不要原谅我）[03:15.34]壊れたい 生まれたい（我渴望毁灭 也渴望重生）[03:19.85]あなたのそばで笑うよ（我会永远在你的身边微笑）[03:25.42]せめてそばにいる 大事な人達に（至少要为身边重要的人们）[03:33.32]いつも私は幸せでいると（送去温柔的梦境）[03:41.24]優しい夢を届けて（告诉他们 我一直很幸福）[03:50.56]あなたのそばにいる（我就在你的身边）[04:02.67]あなたを愛してる（我爱你）[04:08.59]あなたとここにいる（我就和你在这里）[04:14.55]あなたのそばに（我就在你的身边）[04:17.84]その日々は夢のように（那些时光就像是一场梦）","cover":"//img2.kuwo.cn/star/albumcover/300/56/85/378046121.jpg","url":"/music/春はゆく - Aimer.mp3"},{"name":"光るなら","artist":"Goose House","lrc":"[00:00.00]光るなら - Goose house[00:05.60]词：Goose house[00:10.60]曲：Goose house[00:15.440]雨上がりの虹も (雨过天晴的彩虹)[00:20.710]凛と咲いた花も (凛然绽放的花朵)[00:23.810]色づき溢れ出す (色彩随之满溢缤纷)[00:29.220]茜色の空 仰ぐ君に (望着那个仰望绯红色天空的你)[00:35.260]あの日 恋に落ちた (就在那天 我坠入了爱河)[00:40.800]瞬間のドラマチック (戏剧化的那一瞬间)[00:44.360]フィルムの中の1コマも (如荧幕中的特写镜头)[00:47.100]消えないよ 心に刻むから (早已深深铭刻在我心中 永远不会消失)[00:56.210]君だよ 君なんだよ 教えてくれた (是你 是你 告诉我)[01:02.070]暗闇も光るなら (若能在黑暗中绽放光芒)[01:05.020]星空になる (便能化作星空)[01:08.119]悲しみを笑顔に (悲伤化作笑颜)[01:10.920]もう隠さないで (已经无需隐藏)[01:14.070]煌めくどんな星も (漫天闪耀着的星光)[01:17.030]君を照らすから (都会为你照亮前行)[01:20.930]眠りも忘れて 迎えた朝日が (一夜未眠迎来的朝阳)[01:28.340]やたらと突き刺さる (却愈加刺痛我心)[01:34.340]低気圧運ぶ 頭痛だって (令人烦闷的头痛)[01:39.500]忘れる 君に会えば (只要见到你 便能瞬间遗忘)[01:45.610]静寂はロマンティック (静寂编制你我的罗曼史)[01:48.350]紅茶に溶けたシュガーのように (如红茶里融化的砂糖)[01:51.620]全身に巡るよ 君の声 (你的声音萦绕全身)[02:00.640]君だよ 君なんだよ (是你 是你)[02:03.490]笑顔をくれた (带给我笑容)[02:06.590]涙も光るなら (泪滴若能绽放光芒)[02:09.550]流星になる (便能化作流星)[02:12.500]傷付いたその手を (这伤痕累累的双手)[02:15.400]もう離さないで (请别再松开)[02:18.550]願いを込めた空に (寄托心愿的天空)[02:21.400]明日が来るから (明天一定会来到)[02:25.820]導いてくれた 光は 君だよ (指引着我前进的光芒 就是你啊)[02:32.119]つられて僕も 走り出した (我也不禁迈步奔向前方)[02:36.640]知らぬ間に クロスし始めた (不知不觉间 我们交织在一起)[02:43.250]ほら 今だ ここで 光るなら (看 就是现在 若此处有光芒)[02:50.050]君だよ 君なんだよ 教えてくれた (是你 是你 告诉我)[02:56.010]暗闇は終わるから (黑暗终究会过去)[03:01.240]君だよ 君なんだよ 教えてくれた (是你 是你 告诉我)[03:08.150]暗闇も光るなら (若能在黑暗中绽放光芒)[03:11.050]星空になる (便能化作星空)[03:14.120]悲しみを笑顔に (悲伤化作笑颜)[03:16.920]もう隠さないで (已经无需隐藏)[03:20.130]煌めくどんな星も (漫天闪耀着的星光)[03:22.990]君を照らすから (都会为你照亮前行)[03:26.810]答えはいつでも偶然？必然？ (答案是 偶然？必然？)[03:32.960]いつか選んだ道こそ (你曾经选择的路)[03:36.530]運命になる (才是真正的命运)[03:39.340]握りしめた その希望も不安も (紧握在手心的希望也好 不安也罢)[03:44.940]きっと2人を動かす 光になるから (必定会化作驱使我们前进的光芒)","cover":"//img4.kuwo.cn/star/albumcover/300/1/94/1162016738.jpg","url":"/music/光るなら - Goose house.mp3"},{"name":"Hey !","artist":"PLEEG","lrc":"[00:00.00]纯音乐，无歌词","cover":"//p2.music.126.net/6WqNooHkY4ELUGkdQBzrkg==/109951163082345228.jpg","url":"/music/Hey ! - PLEEG.mp3"}]')
      });</script></div></nav></header></div></div><div class="mid-col" q-class="show:isShow,hide:isShow|isFalse"><nav id="mobile-nav"><div class="overlay js-overlay" style="background:#4d4d4d"></div><div class="btnctn js-mobile-btnctn"><div class="slider-trigger list" q-on="click: openSlider(e)"><i class="icon icon-sort"></i></div></div><div class="intrude-less"><header class="header-inner"><div class="profilepic"><img src="/img/avatar.webp" class="js-avatar" alt="avatar"></div><hgroup><h1 class="header-author js-header-author"></h1></hgroup><nav class="header-nav"><div class="social"><a class="mail" target="_blank" href="mailto:2226227487@qq.com" title="mail"><i class="icon-mail"></i></a> <a class="gitee" target="_blank" href="https://gitee.com/akbcd/hexo-theme-yilia" title="gitee"><i class="icon-gitee"></i></a></div></nav><nav class="header-menu js-header-menu"><ul style="width:70%"><li style="width:33.333333333333336%"><a href="/">主页</a></li><li style="width:33.333333333333336%"><a href="/archives/">归档</a></li><li style="width:33.333333333333336%"><a href="/tags/%E9%9A%8F%E7%AC%94/">随笔</a></li></ul></nav><nav class="music-player"><div id="mobile-aplayer"></div><script>const map = new APlayer({
        container: document.getElementById('mobile-aplayer'),
        fixed: 'false' === 'true',
        autoplay: 'false' === 'true',
        theme: '#4d4d4d',
        loop: 'all',
        order: 'random',
        preload: 'none',
        lrcType: Number('1'),
        volume: Number('0.7'),
        listFolded: 'true' === 'true',
        listMaxHeight: '',
        audio: JSON.parse('[{"name":"消えない想い","artist":"芳賀敬太","lrc":"[00:00.00]纯音乐，无歌词","cover":"//p2.music.126.net/U9d0tMpFwxCD2hj03KXLiA==/5907675976380960.jpg","url":"/music/消えない想い - 芳賀敬太.mp3"},{"name":"騎士王の誇り","artist":"川井憲次","lrc":"[00:00.00]纯音乐，无歌词","cover":"//p2.music.126.net/U0Tf2ESHBauv2F9t1PgEZA==/109951163339713541.jpg","url":"/music/騎士王の誇り - 川井憲次.mp3"},{"name":"春はゆく","artist":"Aimer","lrc":"[00:00.00]春はゆく - Aimer[00:05.00] 剧场版《Fate/stay night 「Heaven’s Feel」III.spring song》主题曲[00:10.00] 作曲 : Yuki Kajiura[00:15.00] 作词 : Yuki Kajiura[00:20.61] 编曲：梶浦由記[00:26.59]それでも手を取って（即使如此你仍愿意牵起我的手）[00:32.66]隣に佇んで（在我的身边半步不离）[00:38.61]初めて抱きしめた形（第一次得到了真正的拥抱）[00:50.57]欲張って（忍不住萌生的贪念）[00:53.54]哀しみを抱えすぎていたから（心中所怀的悲伤已太过深刻）[01:02.56]幸せは何処にも（所以无论身在何方）[01:08.51]もう持ちきれなくて（都无法将幸福维持）[01:14.50]花びらを散らした風が（风吹散了花瓣）[01:20.53]扉を開いて 変わる季節（吹开了心扉 改变了季节）[01:39.37]深々と降り積もる時の中（悄无声息不断堆积的时光中）[01:45.34]歓びも苦しみも等しく（无论欢乐还是悲痛）[01:51.26]二人の手のひらで溶けてゆく（都平等地在你我掌心融化）[01:57.33]微笑みも贖いもあなたの側で（微笑也好 赎罪也罢 都只为留在你的身边）[02:14.60]消え去ってゆくことも（连独自消失离开）[02:20.56]ひとりではできなくて（都无法做到的我）[02:26.56]弱虫で身勝手な私（是如此懦弱而自私）[02:38.53]償えない影を背負って（背负着难以赎清的罪孽的阴影）[02:44.53]約束の場所は花の盛り（我们约好的地点已有繁花盛开）[02:57.28]罪も愛も顧みず 春はゆく（不顾罪孽与爱 春日终将逝去）[03:03.28]輝きはただ空に眩しく（只剩下点点亮光还在空中闪耀）[03:09.40]私を許さないでいてくれる（请不要原谅我）[03:15.34]壊れたい 生まれたい（我渴望毁灭 也渴望重生）[03:19.85]あなたのそばで笑うよ（我会永远在你的身边微笑）[03:25.42]せめてそばにいる 大事な人達に（至少要为身边重要的人们）[03:33.32]いつも私は幸せでいると（送去温柔的梦境）[03:41.24]優しい夢を届けて（告诉他们 我一直很幸福）[03:50.56]あなたのそばにいる（我就在你的身边）[04:02.67]あなたを愛してる（我爱你）[04:08.59]あなたとここにいる（我就和你在这里）[04:14.55]あなたのそばに（我就在你的身边）[04:17.84]その日々は夢のように（那些时光就像是一场梦）","cover":"//img2.kuwo.cn/star/albumcover/300/56/85/378046121.jpg","url":"/music/春はゆく - Aimer.mp3"},{"name":"光るなら","artist":"Goose House","lrc":"[00:00.00]光るなら - Goose house[00:05.60]词：Goose house[00:10.60]曲：Goose house[00:15.440]雨上がりの虹も (雨过天晴的彩虹)[00:20.710]凛と咲いた花も (凛然绽放的花朵)[00:23.810]色づき溢れ出す (色彩随之满溢缤纷)[00:29.220]茜色の空 仰ぐ君に (望着那个仰望绯红色天空的你)[00:35.260]あの日 恋に落ちた (就在那天 我坠入了爱河)[00:40.800]瞬間のドラマチック (戏剧化的那一瞬间)[00:44.360]フィルムの中の1コマも (如荧幕中的特写镜头)[00:47.100]消えないよ 心に刻むから (早已深深铭刻在我心中 永远不会消失)[00:56.210]君だよ 君なんだよ 教えてくれた (是你 是你 告诉我)[01:02.070]暗闇も光るなら (若能在黑暗中绽放光芒)[01:05.020]星空になる (便能化作星空)[01:08.119]悲しみを笑顔に (悲伤化作笑颜)[01:10.920]もう隠さないで (已经无需隐藏)[01:14.070]煌めくどんな星も (漫天闪耀着的星光)[01:17.030]君を照らすから (都会为你照亮前行)[01:20.930]眠りも忘れて 迎えた朝日が (一夜未眠迎来的朝阳)[01:28.340]やたらと突き刺さる (却愈加刺痛我心)[01:34.340]低気圧運ぶ 頭痛だって (令人烦闷的头痛)[01:39.500]忘れる 君に会えば (只要见到你 便能瞬间遗忘)[01:45.610]静寂はロマンティック (静寂编制你我的罗曼史)[01:48.350]紅茶に溶けたシュガーのように (如红茶里融化的砂糖)[01:51.620]全身に巡るよ 君の声 (你的声音萦绕全身)[02:00.640]君だよ 君なんだよ (是你 是你)[02:03.490]笑顔をくれた (带给我笑容)[02:06.590]涙も光るなら (泪滴若能绽放光芒)[02:09.550]流星になる (便能化作流星)[02:12.500]傷付いたその手を (这伤痕累累的双手)[02:15.400]もう離さないで (请别再松开)[02:18.550]願いを込めた空に (寄托心愿的天空)[02:21.400]明日が来るから (明天一定会来到)[02:25.820]導いてくれた 光は 君だよ (指引着我前进的光芒 就是你啊)[02:32.119]つられて僕も 走り出した (我也不禁迈步奔向前方)[02:36.640]知らぬ間に クロスし始めた (不知不觉间 我们交织在一起)[02:43.250]ほら 今だ ここで 光るなら (看 就是现在 若此处有光芒)[02:50.050]君だよ 君なんだよ 教えてくれた (是你 是你 告诉我)[02:56.010]暗闇は終わるから (黑暗终究会过去)[03:01.240]君だよ 君なんだよ 教えてくれた (是你 是你 告诉我)[03:08.150]暗闇も光るなら (若能在黑暗中绽放光芒)[03:11.050]星空になる (便能化作星空)[03:14.120]悲しみを笑顔に (悲伤化作笑颜)[03:16.920]もう隠さないで (已经无需隐藏)[03:20.130]煌めくどんな星も (漫天闪耀着的星光)[03:22.990]君を照らすから (都会为你照亮前行)[03:26.810]答えはいつでも偶然？必然？ (答案是 偶然？必然？)[03:32.960]いつか選んだ道こそ (你曾经选择的路)[03:36.530]運命になる (才是真正的命运)[03:39.340]握りしめた その希望も不安も (紧握在手心的希望也好 不安也罢)[03:44.940]きっと2人を動かす 光になるから (必定会化作驱使我们前进的光芒)","cover":"//img4.kuwo.cn/star/albumcover/300/1/94/1162016738.jpg","url":"/music/光るなら - Goose house.mp3"},{"name":"Hey !","artist":"PLEEG","lrc":"[00:00.00]纯音乐，无歌词","cover":"//p2.music.126.net/6WqNooHkY4ELUGkdQBzrkg==/109951163082345228.jpg","url":"/music/Hey ! - PLEEG.mp3"}]')
      });</script></nav></header></div><div class="mobile-mask" style="display:none" q-show="isShow"></div></nav><div id="wrapper" class="body-wrap"><div class="menu-l"><div class="canvas-wrap"><canvas data-colors="#eaeaea" data-sectionheight="100" data-contentid="js-content" id="myCanvas1" class="anm-canvas"></canvas></div><div id="js-content" class="content-ll"><article id="post-yilia主题进阶配置" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-inner"><header class="article-header"><h1 class="article-title" itemprop="name">yilia主题进阶配置</h1><a href="/2019/10/14/yilia%E4%B8%BB%E9%A2%98%E8%BF%9B%E9%98%B6%E9%85%8D%E7%BD%AE/" class="archive-article-date"><time datetime="2019-10-14T03:13:55.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2019-10-14</time></a><div style="color:#999"><span><i class="icon-wordcount icon"></i>&nbsp;字数&nbsp;9k&nbsp;</span></div></header><div class="article-entry" itemprop="articleBody"><div class="article-content"><p>这篇文章添加几个适用于yilia主题的功能</p><span id="more"></span><p>快速导航：<br><a href="#yilia%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0%E6%9C%AC%E5%9C%B0%E5%A4%B4%E5%83%8F">yilia主题添加本地头像</a><br><a href="#%E6%B7%BB%E5%8A%A0%E5%AD%97%E6%95%B0%E7%BB%9F%E8%AE%A1">添加字数统计</a><br><a href="#%E5%AE%89%E8%A3%85%E5%85%A8%E5%B1%80%E6%90%9C%E7%B4%A2%E5%8A%9F%E8%83%BD">安装全局搜索功能</a><br><a href="#yilia%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0%E5%8D%9A%E5%AE%A2%E6%96%87%E7%AB%A0%E7%BD%AE%E9%A1%B6%E5%8A%9F%E8%83%BD%E5%92%8C%E7%BD%AE%E9%A1%B6%E6%A0%87%E7%AD%BE">yilia主题添加博客文章置顶功能和置顶标签</a><br><a href="#hexo%E6%96%87%E7%AB%A0%E5%8A%A0%E5%AF%86%E5%8A%9F%E8%83%BD">hexo文章加密功能</a><br><a href="#yilia%E4%B8%BB%E9%A2%98%E7%A7%BB%E5%8A%A8%E7%AB%AF%E6%B7%BB%E5%8A%A0%E9%A1%B5%E9%9D%A2%E8%BF%9B%E5%BA%A6%E6%9D%A1">yilia主题移动端添加页面进度条</a><br><a href="#hexo%E4%BB%A3%E7%A0%81%E5%9D%97%E5%A4%8D%E5%88%B6%E5%8A%9F%E8%83%BD">hexo代码块复制功能</a><br><a href="#%E4%BB%A3%E7%A0%81%E5%8C%BA%E5%9D%97%E9%AB%98%E4%BA%AE">代码区块高亮</a><br><a href="#%E6%B7%BB%E5%8A%A0%E6%96%87%E7%AB%A0%E6%9B%B4%E6%96%B0%E6%97%B6%E9%97%B4">添加文章更新时间</a><br><a href="#yilia%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0aplayer%E6%92%AD%E6%94%BE%E5%99%A8">yilia主题添加aplayer播放器</a></p><h2 id="yilia主题添加本地头像"><a href="#yilia主题添加本地头像" class="headerlink" title="yilia主题添加本地头像"></a>yilia主题添加本地头像</h2><p>如果你的头像是引用网络的，那就要注意了，网络上的图片随时都有可能被删除，删除之后，头像就没有了<br>头像的图片一般不是很大，完全可以进行本地引用（你要深刻意识到，本地引用图片是会影响到网页加载速度的）</p><p>补充：近期不知你有没有发现<a target="_blank" rel="noopener" href="http://pic.xiaojianjian.net/">小贱贱图床</a>登录说明</p><blockquote><p>登录说明<br>问：为什么突然要登录了？<br>答：因为顶不住咯。估计被xx瞄上了吧。换了N的多账号去维持了，已经被逼去买xx小号了。<br>问：没有注册入口，怎么样获取账号？<br>答： 老用户请加wx：dashu007hao，（请备注说明图床，否则不通过）<br>碎碎念：还能维护多久我也不知道，说不准哪天就不维护了。且用且珍惜吧。珍惜最后的时光</p></blockquote><h3 id="实现方法"><a href="#实现方法" class="headerlink" title="实现方法"></a>实现方法</h3><ul><li>将自己的头像图片放在<code>themes\yilia\source\img</code>路径下（路径可以更换），我的图片名为<code>avatar.png</code></li><li>修改主题配置文件<code>themes\yilia\_config.yml</code>，在里面找到<code>#你的头像url</code>，添加路径</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#你的头像url</span><br><span class="line">avatar: /img/avatar.png</span><br></pre></td></tr></table></figure><ul><li>本地预览<code>hexo s</code>看效果</li></ul><h2 id="添加字数统计"><a href="#添加字数统计" class="headerlink" title="添加字数统计"></a>添加字数统计</h2><p>字数统计需要安装插件实现</p><h3 id="实现方法-1"><a href="#实现方法-1" class="headerlink" title="实现方法"></a>实现方法</h3><ul><li>安装hexo-wordcount插件<br><code>npm i --save hexo-wordcount</code></li><li>找到想添加的位置，以文章标题的下方为例（参看本博客显示效果）</li><li>定位文件<code>themes\yilia\layout\_partial\article.ejs</code>，在里面添加</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if (post.link || post.title)&#123; %&gt;</span><br><span class="line">      &lt;header class=&quot;article-header&quot;&gt;</span><br><span class="line">        &lt;%- partial(&#x27;post/title&#x27;, &#123;class_name: &#x27;article-title&#x27;&#125;) %&gt;</span><br><span class="line">        &lt;% if (!post.noDate)&#123; %&gt;</span><br><span class="line">        &lt;%- partial(&#x27;post/date&#x27;, &#123;class_name: &#x27;archive-article-date&#x27;, date_format: null&#125;) %&gt;</span><br><span class="line">        &lt;% &#125; %&gt;</span><br><span class="line">        &lt;!-- 开始添加字数统计--&gt;</span><br><span class="line">        &lt;% if (!index &amp;&amp; ((theme.wordcount === 1 &amp;&amp; post.wordcount) || theme.wordcount === 2))&#123; %&gt;</span><br><span class="line">        &lt;div style=&quot;color: #999&quot;&gt;</span><br><span class="line">        &lt;span&gt;字数 &lt;%= wordcount(post.content) %&gt;&lt;/span&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">        &lt;% &#125; %&gt;</span><br><span class="line">        &lt;!-- 添加完成 --&gt;</span><br><span class="line">      &lt;/header&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure><p>这里div添加了颜色属性，适配主题<br><strong>div标签的样式可以自己修改，添加style属性即可，也可以添加class，在css中美化</strong></p><ul><li>添加了判断条件，修改主题配置文件<code>themes\yilia\_config.yml</code>，添加</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 字数统计</span><br><span class="line"># 本功能实现需要插件hexo-wordcount</span><br><span class="line"># 设定：0-不显示字数； 1-文章对应的md文件里有wordcount:true属性，才显示字数； 2-所有文章均显示字数</span><br><span class="line"># 不需要使用，直接设置值为false，或注释掉</span><br><span class="line">wordcount: 2</span><br></pre></td></tr></table></figure><ul><li><code>hexo s</code>本地预览查看效果</li></ul><h2 id="安装全局搜索功能"><a href="#安装全局搜索功能" class="headerlink" title="安装全局搜索功能"></a>安装全局搜索功能</h2><p>yilia博客拥有一个搜索功能，这个功能只能匹配到标题和标签，不是很强大，接下来介绍一个能匹配到文章内容关键字的搜索功能<br>这个功能的实现，感谢：<br>全局搜索功能的开发者：<br><a target="_blank" rel="noopener" href="https://www.hahack.com/codes/local-search-engine-for-hexo/">jQuery-based Local Search Engine for Hexo</a><br>hexo-theme-matery主题开发者：<br><a target="_blank" rel="noopener" href="https://blinkfox.github.io/">https://blinkfox.github.io/</a><br>没有他们的贡献，我自己实现不了这个功能，本功能实现效果与hexo-theme-matery主题类似</p><h3 id="效果图（具体效果可参看本主题）"><a href="#效果图（具体效果可参看本主题）" class="headerlink" title="效果图（具体效果可参看本主题）"></a>效果图（具体效果可参看本主题）</h3><p>pc页面<br><img src="https://tva1.sinaimg.cn/large/007X8olVly1g8asepxgnbj30kj09yqbv.jpg"><br>手机页面<br><img src="https://tva1.sinaimg.cn/large/007X8olVly1g8asf74sq6j30ci0k67dj.jpg"></p><h3 id="实现方法-2"><a href="#实现方法-2" class="headerlink" title="实现方法"></a>实现方法</h3><p>本功能的实现需要导入jquery，我用的版本是<code>jquery-3.4.1.js</code>（可以在线引用）<br>本功能的实现还需要安装插件<code>hexo-generator-searchdb</code></p><ul><li>博客的根目录下，<code>git bash here</code>，输入命令：<code>npm install hexo-generator-searchdb --save</code></li><li>根目录配置文件（不是主题配置文件）<code>_config.yml</code>中添加以下内容</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">search:</span><br><span class="line">  path: search.xml</span><br><span class="line">  field: post</span><br></pre></td></tr></table></figure><p>测试插件是否安装成功</p><ul><li>输入本地预览命令<code>hexo s</code>，在浏览器输入预览网址<br>在网址后添加<code>search.xml</code>，比如我的预览网址是<code>localhost:4000/</code>，那就在浏览器导航栏输入<code>localhost:4000/search.xml</code><br>查看是否有页面显示，出现页面，插件安装成功（这一步决定全局搜索功能是否会实现）</li><li>在主题路径<code>themes\yilia\layout\_partial</code>下创建<code>search.ejs</code>文件</li><li>上jquery官网下载jquery，将<code>jquery-3.4.1.js</code>放在<code>themes\yilia\source</code>路径下（这里在线引用）</li></ul><p>在<code>search.ejs</code>中添加以下内容（粘贴到<code>search.ejs</code>中即可）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if (theme.local_search &amp;&amp; theme.local_search.enable)&#123; %&gt;</span><br><span class="line">&lt;div id=&quot;js-searchModal&quot;&gt;</span><br><span class="line">    &lt;div style=&quot;padding: 24px;&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;search-header&quot;&gt;</span><br><span class="line">            &lt;span&gt;&lt;i class=&quot;icon-search icon&quot;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;搜索&lt;/span&gt;</span><br><span class="line">            &lt;input class=&quot;search-ipt&quot; q-model=&quot;search&quot; type=&quot;text&quot; placeholder=&quot;请输入搜索的关键字&quot; id=&quot;js-searchInput&quot;&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div id=&quot;js-searchResult&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;!--搜索背景层--&gt;</span><br><span class="line">&lt;div id=&quot;js-modal-overlay&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">    window.onload=function()&#123;</span><br><span class="line">        var top1=0;</span><br><span class="line">        function stopBodyScroll(isFixed)&#123;</span><br><span class="line">            var bodyEl=document.body;</span><br><span class="line">            if(isFixed)&#123;</span><br><span class="line">                //获取页面滚动的距离</span><br><span class="line">                top1=window.scrollY;</span><br><span class="line">                //将body标签在当前位置固定</span><br><span class="line">                bodyEl.style.position=&#x27;fixed&#x27;;</span><br><span class="line">                bodyEl.style.top=-top1+&#x27;px&#x27;;</span><br><span class="line">                bodyEl.style.width=&#x27;100%&#x27;</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                bodyEl.style.position=&#x27;&#x27;;</span><br><span class="line">                bodyEl.style.top=&#x27;&#x27;;</span><br><span class="line">                //页面回到获取的位置</span><br><span class="line">                window.scrollTo(0,top1)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        //给搜索图标添加点击事件</span><br><span class="line">        var open = document.getElementById(&#x27;js-icon-search&#x27;);</span><br><span class="line">        open.setAttribute(&quot;title&quot;,&quot;搜索&quot;)</span><br><span class="line">        open.onclick = function()&#123;</span><br><span class="line">            //弹窗出现时淡入动画</span><br><span class="line">            $(&quot;#js-searchModal&quot;).fadeIn(1000);</span><br><span class="line">            $(&quot;#js-modal-overlay&quot;).fadeIn(1000);</span><br><span class="line">            //固定body</span><br><span class="line">            stopBodyScroll(true);</span><br><span class="line">        &#125;</span><br><span class="line">        //关闭搜索</span><br><span class="line">        var close = document.getElementById(&#x27;js-modal-overlay&#x27;);</span><br><span class="line">        close.onclick = function()&#123;</span><br><span class="line">            //弹窗关闭时淡出动画</span><br><span class="line">            $(&quot;#js-searchModal&quot;).fadeOut(500);</span><br><span class="line">            $(&quot;#js-modal-overlay&quot;).fadeOut(500);</span><br><span class="line">            //移除body固定</span><br><span class="line">            stopBodyScroll(false);</span><br><span class="line">            document.body.removeAttribute(&#x27;style&#x27;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;!-- 引入jquery --&gt;</span><br><span class="line">&lt;script src=&quot;https://code.jquery.com/jquery-3.4.1.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;!-- 调用本地搜索函数 --&gt;</span><br><span class="line">&lt;script src=&quot;&lt;%=config.root%&gt;./js/search.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure><ul><li>在主题<code>themes\yilia\source</code>路径下创建一个<code>js</code>文件夹，里面创建<code>search.js</code>文件，将以下内容（<a target="_blank" rel="noopener" href="https://www.hahack.com/codes/local-search-engine-for-hexo/">jQuery-based Local Search Engine for Hexo</a>）粘贴到此文件中（路径和文件名根据自己需要在上面的内容中修改）</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> searchFunc = <span class="keyword">function</span> (<span class="params">path, search_id, content_id</span>) &#123;</span><br><span class="line">    <span class="string">&#x27;use strict&#x27;</span>;</span><br><span class="line">    $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: path,</span><br><span class="line">        <span class="attr">dataType</span>: <span class="string">&quot;xml&quot;</span>,</span><br><span class="line">        <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">xmlResponse</span>) &#123;</span><br><span class="line">            <span class="comment">// get the contents from search data</span></span><br><span class="line">            <span class="keyword">var</span> datas = $(<span class="string">&quot;entry&quot;</span>, xmlResponse).<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> &#123;</span><br><span class="line">                    <span class="attr">title</span>: $(<span class="string">&quot;title&quot;</span>, <span class="variable language_">this</span>).<span class="title function_">text</span>(),</span><br><span class="line">                    <span class="attr">content</span>: $(<span class="string">&quot;content&quot;</span>, <span class="variable language_">this</span>).<span class="title function_">text</span>(),</span><br><span class="line">                    <span class="attr">url</span>: $(<span class="string">&quot;url&quot;</span>, <span class="variable language_">this</span>).<span class="title function_">text</span>()</span><br><span class="line">                &#125;;</span><br><span class="line">            &#125;).<span class="title function_">get</span>();</span><br><span class="line">            <span class="keyword">var</span> $input = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(search_id);</span><br><span class="line">            <span class="keyword">var</span> $resultContent = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(content_id);</span><br><span class="line">            $input.<span class="title function_">addEventListener</span>(<span class="string">&#x27;input&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                <span class="keyword">var</span> str = <span class="string">&#x27;&lt;ul class=\&quot;search-result-list\&quot;&gt;&#x27;</span>;</span><br><span class="line">                <span class="keyword">var</span> keywords = <span class="variable language_">this</span>.<span class="property">value</span>.<span class="title function_">trim</span>().<span class="title function_">toLowerCase</span>().<span class="title function_">split</span>(<span class="regexp">/[\s\-]+/</span>);</span><br><span class="line">                $resultContent.<span class="property">innerHTML</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">                <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">value</span>.<span class="title function_">trim</span>().<span class="property">length</span> &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// perform local searching</span></span><br><span class="line">                datas.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">                    <span class="keyword">var</span> isMatch = <span class="literal">true</span>;</span><br><span class="line">                    <span class="keyword">var</span> content_index = [];</span><br><span class="line">                    <span class="keyword">var</span> data_title = data.<span class="property">title</span>.<span class="title function_">trim</span>().<span class="title function_">toLowerCase</span>();</span><br><span class="line">                    <span class="keyword">var</span> data_content = data.<span class="property">content</span>.<span class="title function_">trim</span>().<span class="title function_">replace</span>(<span class="regexp">/&lt;[^&gt;]+&gt;/g</span>, <span class="string">&quot;&quot;</span>).<span class="title function_">toLowerCase</span>();</span><br><span class="line">                    <span class="keyword">var</span> data_url = data.<span class="property">url</span>;</span><br><span class="line">                    <span class="keyword">var</span> index_title = -<span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">var</span> index_content = -<span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">var</span> first_occur = -<span class="number">1</span>;</span><br><span class="line">                    <span class="comment">// only match artiles with not empty titles and contents</span></span><br><span class="line">                    <span class="keyword">if</span> (data_title != <span class="string">&#x27;&#x27;</span> &amp;&amp; data_content != <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">                        keywords.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">keyword, i</span>) &#123;</span><br><span class="line">                            index_title = data_title.<span class="title function_">indexOf</span>(keyword);</span><br><span class="line">                            index_content = data_content.<span class="title function_">indexOf</span>(keyword);</span><br><span class="line">                            <span class="keyword">if</span> (index_title &lt; <span class="number">0</span> &amp;&amp; index_content &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                                isMatch = <span class="literal">false</span>;</span><br><span class="line">                            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                                <span class="keyword">if</span> (index_content &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                                    index_content = <span class="number">0</span>;</span><br><span class="line">                                &#125;</span><br><span class="line">                                <span class="keyword">if</span> (i == <span class="number">0</span>) &#123;</span><br><span class="line">                                    first_occur = index_content;</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">// show search results</span></span><br><span class="line">                    <span class="keyword">if</span> (isMatch) &#123;</span><br><span class="line">                        str += <span class="string">&quot;&lt;li&gt;&lt;a href=&#x27;&quot;</span> + data_url + <span class="string">&quot;&#x27; class=&#x27;search-result-title&#x27;&gt;&quot;</span> + data_title + <span class="string">&quot;&lt;/a&gt;&quot;</span>;</span><br><span class="line">                        <span class="keyword">var</span> content = data.<span class="property">content</span>.<span class="title function_">trim</span>().<span class="title function_">replace</span>(<span class="regexp">/&lt;[^&gt;]+&gt;/g</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">                        <span class="keyword">if</span> (first_occur &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                            <span class="comment">// cut out 100 characters</span></span><br><span class="line">                            <span class="keyword">var</span> start = first_occur - <span class="number">20</span>;</span><br><span class="line">                            <span class="keyword">var</span> end = first_occur + <span class="number">80</span>;</span><br><span class="line">                            <span class="keyword">if</span> (start &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                                start = <span class="number">0</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">if</span> (start == <span class="number">0</span>) &#123;</span><br><span class="line">                                end = <span class="number">100</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">if</span> (end &gt; content.<span class="property">length</span>) &#123;</span><br><span class="line">                                end = content.<span class="property">length</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">var</span> match_content = content.<span class="title function_">substr</span>(start, end);</span><br><span class="line">                            <span class="comment">// highlight all keywords</span></span><br><span class="line">                            keywords.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">keyword</span>) &#123;</span><br><span class="line">                                <span class="keyword">var</span> regS = <span class="keyword">new</span> <span class="title class_">RegExp</span>(keyword, <span class="string">&quot;gi&quot;</span>);</span><br><span class="line">                                match_content = match_content.<span class="title function_">replace</span>(regS, <span class="string">&quot;&lt;em class=\&quot;search-keyword\&quot;&gt;&quot;</span> + keyword + <span class="string">&quot;&lt;/em&gt;&quot;</span>);</span><br><span class="line">                            &#125;);</span><br><span class="line">                            str += <span class="string">&quot;&lt;p class=\&quot;search-result\&quot;&gt;&quot;</span> + match_content + <span class="string">&quot;...&lt;/p&gt;&quot;</span></span><br><span class="line">                        &#125;</span><br><span class="line">                        str += <span class="string">&quot;&lt;/li&gt;&quot;</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">                str += <span class="string">&quot;&lt;/ul&gt;&quot;</span>;</span><br><span class="line">                $resultContent.<span class="property">innerHTML</span> = str;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//调用搜索函数</span></span><br><span class="line">$(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">searchFunc</span>(<span class="string">&quot;/&quot;</span> + <span class="string">&quot;search.xml&quot;</span>, <span class="string">&#x27;js-searchInput&#x27;</span>, <span class="string">&#x27;js-searchResult&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>定位文件<code>themes\yilia\layout\_partial\tools.ejs</code>，在里面找到搜索图标的i标签，在标签里添加一个id：<code>js-icon-search</code>（添加搜索弹窗事件）<br>这里实现的是点击搜索图标出现搜索框</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;search-wrap&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;search-ipt&quot;</span> <span class="attr">q-model</span>=<span class="string">&quot;search&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;find something…&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--修改位置--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;icon-search icon&quot;</span> <span class="attr">q-show</span>=<span class="string">&quot;search|isEmptyStr&quot;</span> <span class="attr">id</span>=<span class="string">&quot;js-icon-search&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;icon-close icon&quot;</span> <span class="attr">q-show</span>=<span class="string">&quot;search|isNotEmptyStr&quot;</span> <span class="attr">q-on</span>=<span class="string">&quot;click:clearChose(e)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>修改搜索弹窗的样式，主题<code>themes\yilia\source\main.0cf68a.css</code>文件中添加</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 全局搜索样式 */</span></span><br><span class="line"><span class="selector-id">#js-searchModal</span> &#123;</span><br><span class="line">	<span class="attribute">display</span>: none;</span><br><span class="line">	<span class="attribute">top</span>: <span class="number">10%</span>;</span><br><span class="line">    <span class="attribute">min-height</span>: <span class="number">500px</span>;</span><br><span class="line">    <span class="attribute">max-height</span>: <span class="number">70%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">80%</span>;</span><br><span class="line">    <span class="attribute">word-wrap</span>: break-word;</span><br><span class="line">	<span class="attribute">z-index</span>: <span class="number">1001</span>;</span><br><span class="line">	<span class="attribute">position</span>: fixed;</span><br><span class="line">	<span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">	<span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">200deg</span>,<span class="number">#a0cfe4</span>,<span class="number">#e8c37e</span>);</span><br><span class="line">	<span class="attribute">margin</span>: auto;</span><br><span class="line">	<span class="attribute">overflow</span>: auto;</span><br><span class="line">	<span class="attribute">border-radius</span>: <span class="number">10px</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#js-modal-overlay</span> &#123;</span><br><span class="line">	<span class="attribute">display</span>: none;</span><br><span class="line">	<span class="attribute">position</span>: fixed;</span><br><span class="line">	<span class="attribute">z-index</span>: <span class="number">1000</span>;</span><br><span class="line">	<span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">	<span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">	<span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">	<span class="attribute">opacity</span>: .<span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.search-header</span>,<span class="selector-class">.search-header</span> <span class="selector-tag">i</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">	<span class="attribute">font-size</span>: <span class="number">18px</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.search-header</span> ::-webkit-input-placeholder &#123;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#ededed</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.search-header</span> <span class="selector-class">.search-ipt</span> &#123;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">	<span class="attribute">background</span>: none;</span><br><span class="line">	<span class="attribute">border</span>: none;</span><br><span class="line">	<span class="attribute">border-bottom</span>: <span class="number">2px</span> solid <span class="number">#fff</span>;</span><br><span class="line">	<span class="attribute">font-family</span>: Roboto,serif</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.search-result-list</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">	<span class="attribute">border-bottom</span>: <span class="number">1px</span> dotted <span class="number">#dcdcdc</span>;</span><br><span class="line">	<span class="attribute">padding-top</span>: <span class="number">5px</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.search-result-list</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">	<span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">	<span class="attribute">font-weight</span>: <span class="number">300</span>;</span><br><span class="line">	<span class="attribute">line-height</span>: <span class="number">35px</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.search-result-list</span> <span class="selector-class">.search-result</span> &#123;</span><br><span class="line">	<span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">	<span class="attribute">line-height</span>: <span class="number">20px</span>;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#fffdd8</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.search-result-list</span> <span class="selector-class">.search-keyword</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#e96900</span>;</span><br><span class="line">	<span class="attribute">font-style</span>: normal</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 全局搜索样式结束 */</span></span><br></pre></td></tr></table></figure><ul><li>定位文件<code>themes\yilia\layout\layout.ejs</code>，在里面的body标签下添加内容：<code>&lt;%- partial(&#39;_partial/search&#39;) %&gt;</code>（添加位置可以根据需求更改）</li></ul><p><strong>注意：不要添加在body标签内的最后，即主题导入js之后，这样会导致主题的部分js失效</strong><br><strong>建议在以下位置添加</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;!--开始添加--&gt;</span><br><span class="line">  &lt;%- partial(&#x27;_partial/search&#x27;) %&gt;</span><br><span class="line">  &lt;!添加结束&gt;</span><br><span class="line">  &lt;div id=&quot;container&quot; q-class=&quot;show:isCtnShow&quot;&gt;</span><br><span class="line">    &lt;canvas id=&quot;anm-canvas&quot; class=&quot;anm-canvas&quot;&gt;&lt;/canvas&gt;</span><br></pre></td></tr></table></figure><ul><li>最后一步，在<code>themes\yilia\_config.yml</code>中添加判断配置</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#是否开启全局搜索</span><br><span class="line">#不开启值为false，开启，值为true</span><br><span class="line">#使用方法：点击所有文章中的搜索图标</span><br><span class="line">local_search:</span><br><span class="line">  enable: true</span><br></pre></td></tr></table></figure><p>简单说明一下原理：通过获取搜索图标的id，添加点击事件，通过点击事件弹出全局搜索框，添加一个背景层（这里的背景层类似于开启分享显示微信二维码时的背景层样式），并将body固定在当前位置（禁止背景层下的内容滚动），在背景层添加一个关闭搜索弹窗的点击事件，关闭全局搜索，移除body固定<br>主题配置文件全局搜索的开关通过<code>search.ejs</code>文件中的第一行判断语句进行判断<br>这里对<code>main.0cf68a.css</code>文件的修改可以根据自己的需求更改<br>yilia主题有一个气泡上浮的动画效果，在搜索弹窗中没有实现(添加了搜索弹窗淡入淡出效果)<br>每个人都应有自己的思路，根据需要修改相关内容<br>最后，再次感谢以上的杰出贡献者，使我在yilia主题中实现了全局搜索功能</p><h2 id="yilia主题添加博客文章置顶功能和置顶标签"><a href="#yilia主题添加博客文章置顶功能和置顶标签" class="headerlink" title="yilia主题添加博客文章置顶功能和置顶标签"></a>yilia主题添加博客文章置顶功能和置顶标签</h2><p><strong>注：yilia主题内置文章置顶功能，只需在Front-matter中添加<code>top: true</code>即可，支持置顶多个文章，置顶的文章会再次以时间进行排序</strong><br><strong>请先在Front-matter中添加<code>top: true</code>，然后查看文章是否置顶，如果没有实现请继续看实现方法</strong></p><p>目前已经有了博客文章置顶的插件，觉得这个功能很好用，在这里分享一下<br>参考链接<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qwerty200696/article/details/79010629">hexo博客优化之文章置顶+置顶标签</a><br>感谢插件的制作者<br><a target="_blank" rel="noopener" href="https://github.com/netcan/hexo-generator-index-pin-top">hexo-generator-index-pin-top</a></p><h3 id="实现方法-3"><a href="#实现方法-3" class="headerlink" title="实现方法"></a>实现方法</h3><ul><li>安装插件（博客根目录git安装）<br><code>npm uninstall hexo-generator-index --save</code><br><code>npm install hexo-generator-index-pin-top --save</code><br>安装完成后</li><li>在需要置顶的文章中加上<code>top: true</code>即可</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: jsp第一次课</span><br><span class="line">date: 2019-10-09 09:54:51</span><br><span class="line">tags: jsp</span><br><span class="line">top: true</span><br><span class="line">---</span><br></pre></td></tr></table></figure><ul><li>本地预览<code>hexo s</code>，你会看到yilia主题自带置顶标签，不需要进行额外的添加<br><img src="https://tva1.sinaimg.cn/large/007X8olVly1g8ash8bd5kj308902pa9u.jpg"></li><li>到此，功能实现完成</li></ul><p>还有一种方法，修改<code>Hexo文件夹下的node_modules/hexo-generator-index/lib/generator.js</code>文件，个人感觉没有这个简单，这里不进行介绍。<br>感兴趣的话，点击<a target="_blank" rel="noopener" href="https://zhousiwei.gitee.io/2019/02/25/%E6%96%B0%E5%A2%9EHexo%E5%8D%9A%E5%AE%A2%E6%96%87%E7%AB%A0%E7%BD%AE%E9%A1%B6%E5%8A%9F%E8%83%BD/">新增Hexo博客文章置顶功能</a></p><h2 id="hexo文章加密功能"><a href="#hexo文章加密功能" class="headerlink" title="hexo文章加密功能"></a>hexo文章加密功能</h2><p>阅读文章的密码验证功能，文章的密码是通过<code>SHA256</code>加密<br>此功能通过JavaScript实现，如果浏览器中有是否启用JavaScript选项，选否后，加密功能失效（<a target="_blank" rel="noopener" href="https://purelitebrowser.com/">Pure浏览器</a>）<br>此功能适用于yilia主题</p><h3 id="实现效果"><a href="#实现效果" class="headerlink" title="实现效果"></a>实现效果</h3><p>在主页访问文章详细内容时，会在文章详细页出现弹窗，输入相应的密码进入详细页，密码输入错误跳回主页</p><h3 id="实现方法-4"><a href="#实现方法-4" class="headerlink" title="实现方法"></a>实现方法</h3><ul><li>将以下内容添加到<code>themes\yilia\layout\_partial\article.ejs</code>文件的顶部<br><code>&lt;script src=&quot;&lt;%=config.root%&gt;./js/crypto-js.min.js&quot;&gt;&lt;/script&gt;</code>是本地引入js的路径，根据需要更改<br>这里提供的是云端引用（即联网才可用）<br><code>page.password</code>控制只在有password的文章导入下面的代码，如果不添加此项，会使所有文章都导入下面代码（效果一样，但是代码量不一样）<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if (theme.verifyPassword.enable &amp;&amp; page.password) &#123; %&gt;</span><br><span class="line">&lt;!-- 本地引入js --&gt;</span><br><span class="line">&lt;!-- &lt;script src=&quot;&lt;%=config.root%&gt;./js/crypto-js.min.js&quot;&gt;&lt;/script&gt; --&gt;</span><br><span class="line">&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/crypto-js.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    (function() &#123;</span><br><span class="line">        let pwd = &#x27;&lt;%- page.password %&gt;&#x27;;</span><br><span class="line">        if (pwd &amp;&amp; pwd.length &gt; 0) &#123;</span><br><span class="line">            if (pwd !== CryptoJS.SHA256(prompt(&#x27;&lt;%- theme.verifyPassword.promptMessage %&gt;&#x27;)).toString(CryptoJS.enc.Hex)) &#123;</span><br><span class="line">                alert(&#x27;&lt;%- theme.verifyPassword.errorMessage %&gt;&#x27;);</span><br><span class="line">                location.href = &#x27;&lt;%- url_for(&quot;/&quot;)  %&gt;&#x27;;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)();</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure></li><li>在<code>themes\yilia\_config.yml</code>中添加如下配置</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 阅读文章的密码验证功能，如要使用此功能请激活该配置项，并在对应文章的Front-matter中写上&#x27;password&#x27;的键和密码加密后的密文即可.</span><br><span class="line"># 比如</span><br><span class="line"># password: 加密的密文</span><br><span class="line"># 请注意：为了保证密码原文不会被泄露到网页中，文章的密码必须是通过&#x27;SHA256&#x27;加密的，这样就不会被破解.</span><br><span class="line">verifyPassword:</span><br><span class="line">  enable: false</span><br><span class="line">  promptMessage: 请输入访问本文章的密码</span><br><span class="line">  errorMessage: 密码错误，将返回主页！</span><br></pre></td></tr></table></figure><h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><p>在<code>Front-matter</code>中添加<code>password: SHA256</code>，<code>SHA256</code>是密码加密后的密文，访问文章时输入加密前的密码即可<br>如果要对文章设置阅读验证密码的功能，不仅要在 Front-matter 中设置采用了 SHA256 加密的 password 的值，还需要在主题的 <code>_config.yml</code> 中激活了配置。有些在线的 SHA256 加密的地址，可供你使用：<br><a target="_blank" rel="noopener" href="http://tool.oschina.net/encrypt?type=2">开源中国在线工具</a><br><a target="_blank" rel="noopener" href="http://encode.chahuo.com/">chahuo</a><br><a target="_blank" rel="noopener" href="http://tool.chinaz.com/tools/hash.aspx">站长工具</a></p><h3 id="感谢"><a href="#感谢" class="headerlink" title="感谢"></a>感谢</h3><p>这个功能是hexo-theme-matery主题开发者实现的<br><a target="_blank" rel="noopener" href="https://blinkfox.github.io/">https://blinkfox.github.io/</a><br>在此表示感谢！</p><h2 id="yilia主题移动端添加页面进度条"><a href="#yilia主题移动端添加页面进度条" class="headerlink" title="yilia主题移动端添加页面进度条"></a>yilia主题移动端添加页面进度条</h2><p>移动端隐藏了滚动条，加一个网页进度条可以更清楚了解到当前页面在网页的位置</p><h3 id="说明-1"><a href="#说明-1" class="headerlink" title="说明"></a>说明</h3><p>此网页进度条只在移动端页面出现，pc端进度条宽度始终为0<br>网页进度条在页面最下方，样式可根据自己的需要更改</p><h3 id="实现方法-5"><a href="#实现方法-5" class="headerlink" title="实现方法"></a>实现方法</h3><p>需要用到scrollprogress.js，这里云端引用</p><ul><li><code>themes\yilia\layout\_partial\script.ejs</code>文件中添加</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 页面进度条 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/scrollprogress/3.0.2/scrollProgress.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// progress bar init</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> progressElement = <span class="variable language_">window</span>.<span class="property">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.progress-bar&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (progressElement) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">new</span> <span class="title class_">ScrollProgress</span>(<span class="function">(<span class="params">x, y</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            progressElement.<span class="property">style</span>.<span class="property">width</span> = y * <span class="number">100</span> + <span class="string">&#x27;%&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>在<code>themes\yilia\layout\layout.ejs</code>添加滚动条<code>&lt;div class=&quot;progress-bar&quot;&gt;&lt;/div&gt;</code>的位置，我是在<code>&lt;%- partial(&#39;_partial/footer&#39;) %&gt;</code>下面添加</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;%- partial(&#x27;_partial/footer&#x27;) %&gt;</span><br><span class="line">&lt;!-- 开始添加 --&gt;</span><br><span class="line">&lt;div class=&quot;progress-bar&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;!-- 添加结束 --&gt;</span><br></pre></td></tr></table></figure><ul><li><code>themes\yilia\source\main.0cf68a.css</code>添加样式</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 进度条 */</span></span><br><span class="line"><span class="selector-class">.progress-bar</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">300</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#eaeaea</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>yilia主题pc页面与移动端页面布局不同，pc端不会显示进度条，上面的js在pc端页面返回值始终是0，即进度条的宽度始终为0</p><h3 id="感谢-1"><a href="#感谢-1" class="headerlink" title="感谢"></a>感谢</h3><p><a target="_blank" rel="noopener" href="https://blinkfox.github.io/">https://blinkfox.github.io/</a></p><h2 id="hexo代码块复制功能"><a href="#hexo代码块复制功能" class="headerlink" title="hexo代码块复制功能"></a>hexo代码块复制功能</h2><p>此功能应该适用于所有的hexo主题</p><h3 id="说明-2"><a href="#说明-2" class="headerlink" title="说明"></a>说明</h3><p>代码块复制功能是在代码块部分显示复制按钮，点击复制按钮，实现代码块复制功能<br>本功能实现需要引入jquery<br>运用<a target="_blank" rel="noopener" href="http://www.clipboardjs.cn/">clipboard.js</a>实现复制代码块功能</p><h3 id="实现方法（更新）"><a href="#实现方法（更新）" class="headerlink" title="实现方法（更新）"></a>实现方法（更新）</h3><p>前提：<br>本功能依据hexo配置文件<code>_config.yml</code>（不是主题那个）中<code>highlight.enable</code>值为true所生成的代码区块标签实现。<br>如果你的<code>highlight.enable</code>值为false，那么复制按钮的位置要做相应改变<br>主题中添加js代码<br>本js中clipboard.js使用网络引用，可以将其下载到本地引用<br>如果主题中没有引入jquery，请将jquery引入</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 复制代码块 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://clipboardjs.com/dist/clipboard.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">/*页面载入完成后，创建复制按钮*/</span></span></span><br><span class="line"><span class="language-javascript">    !<span class="keyword">function</span> (<span class="params">e, t, a</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> initCopyCode = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> copyHtml = <span class="string">&#x27;&lt;button type=&quot;button&quot; class=&quot;js-btn-copy&quot;&gt;复制&lt;/button&gt;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;.code pre&quot;</span>).<span class="title function_">before</span>(copyHtml);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">initCopyCode</span>();</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 代码块复制</span></span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&quot;.code&quot;</span>).<span class="title function_">on</span>(<span class="string">&quot;click&quot;</span>,<span class="string">&quot;.js-btn-copy&quot;</span>,<span class="keyword">function</span>(<span class="params">button</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> copy=button.<span class="property">currentTarget</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> clipboard = <span class="keyword">new</span> <span class="title class_">ClipboardJS</span>(<span class="string">&#x27;.js-btn-copy&#x27;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">target</span>: <span class="keyword">function</span>(<span class="params">trigger</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(trigger.<span class="property">nextElementSibling</span> != <span class="literal">null</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">return</span> trigger.<span class="property">nextElementSibling</span>;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            clipboard.<span class="title function_">on</span>(<span class="string">&#x27;success&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                e.<span class="title function_">clearSelection</span>();</span></span><br><span class="line"><span class="language-javascript">                $(copy).<span class="title function_">html</span>(<span class="string">&quot;复制成功&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                clipboard.<span class="title function_">destroy</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            clipboard.<span class="title function_">on</span>(<span class="string">&#x27;error&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                $(copy).<span class="title function_">html</span>(<span class="string">&quot;复制失败&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                clipboard.<span class="title function_">destroy</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            $(copy).<span class="title function_">mouseout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;$(event.<span class="property">currentTarget</span>).<span class="title function_">html</span>(<span class="string">&quot;复制&quot;</span>)&#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;(<span class="variable language_">window</span>, <span class="variable language_">document</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>主题中添加css样式（本样式根据yilia主题美化）</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 代码块复制 */</span></span><br><span class="line"><span class="selector-class">.js-btn-copy</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">10%</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1em</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#4d4d4d</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: white;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">2px</span> <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#d5d5d5</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute; </span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">figure</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.js-btn-copy</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">800px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.js-btn-copy</span> &#123;</span><br><span class="line">        <span class="attribute">right</span>: <span class="number">5%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>样式根据自己的主题需要进行更改，重点更改自己主题中复制按钮的样式</p><h3 id="实现效果-1"><a href="#实现效果-1" class="headerlink" title="实现效果"></a>实现效果</h3><p>点击复制按钮，复制按钮变成复制成功</p><h3 id="更新说明"><a href="#更新说明" class="headerlink" title="更新说明"></a>更新说明</h3><p>美化复制按钮样式（模仿CSDN），添加代码块复制失败提示，修改click事件传参形式</p><h3 id="感谢-2"><a href="#感谢-2" class="headerlink" title="感谢"></a>感谢</h3><p>本功能实现参照<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_41287260/article/details/103051122">hexo+yilia添加复制代码块的功能</a><br><a target="_blank" rel="noopener" href="https://jzfblog.com/detail/153">蒋振飞的博客 - 网站搭建 (第23天) 代码块复制功能</a><br>重点应用<br><a target="_blank" rel="noopener" href="http://www.clipboardjs.cn/">clipboard.js</a><br>对以上杰出贡献者表示感谢</p><h2 id="代码区块高亮"><a href="#代码区块高亮" class="headerlink" title="代码区块高亮"></a>代码区块高亮</h2><p>yilia主题自带高亮<br>分享一下这篇文章<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_41287260/article/details/103051056">hexo+yilia修改代码块等样式</a></p><h3 id="两种实现方法"><a href="#两种实现方法" class="headerlink" title="两种实现方法"></a>两种实现方法</h3><h4 id="第一种：使用主题自带代码区块高亮实现"><a href="#第一种：使用主题自带代码区块高亮实现" class="headerlink" title="第一种：使用主题自带代码区块高亮实现"></a>第一种：使用主题自带代码区块高亮实现</h4><p><strong>方法一</strong><br>前提：<br>hexo配置文件<code>_config.yml</code>（不是主题那个）中<code>highlight.enable</code>值为true</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">highlight:</span><br><span class="line">  enable: true</span><br><span class="line">  line_number: true</span><br><span class="line">  auto_detect: false</span><br><span class="line">  tab_replace:</span><br></pre></td></tr></table></figure><p>在代码块标签后面声明代码区块语言（这里以css为例）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">```css</span><br><span class="line">figure:hover .js-btn-copy&#123;</span><br><span class="line">  opacity: 1;</span><br><span class="line">&#125;</span><br><span class="line">```</span><br></pre></td></tr></table></figure><p>效果：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">figure</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.js-btn-copy</span>&#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>方法二</strong><br>通过修改hexo配置文件实现<br>将<code>highlight.auto_detect</code>值设为true<br>即开启代码区块语言自动检测功能</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">highlight:</span><br><span class="line">  enable: true</span><br><span class="line">  line_number: true</span><br><span class="line">  auto_detect: true</span><br><span class="line">  tab_replace:</span><br></pre></td></tr></table></figure><p>注：修改hexo配置文件后需要重启hexo服务才能生效<br>如果依然没有生效，请尝试使用<code>hexo clean</code><br>高亮样式通过主题css样式文件进行实现（可以根据需要自行修改<code>main.0cf68a.css</code>文件）</p><h4 id="第二种：通过highlight-js实现代码区块高亮"><a href="#第二种：通过highlight-js实现代码区块高亮" class="headerlink" title="第二种：通过highlight.js实现代码区块高亮"></a>第二种：通过<a target="_blank" rel="noopener" href="https://highlightjs.org/">highlight.js</a>实现代码区块高亮</h4><p><a target="_blank" rel="noopener" href="https://highlightjs.org/">highlight.js</a>是实现代码区块高亮的js<br>此js会自动检测页面中<code>&lt;pre&gt;&lt;code&gt;..&lt;/code&gt;&lt;/pre&gt;</code>的代码区块（这是重点）<br><strong>实现方法：</strong><br>改变hexo代码区块标签结构（可选）<br>hexo配置文件<code>_config.yml</code>（不是主题那个）中<code>highlight.enable</code>值为false<br>true和false的值会改变代码区块的标签结构<br>如果不想修改<code>highlight.enable</code>值为false，请看下面的补充说明</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">highlight:</span><br><span class="line">  enable: false</span><br><span class="line">  line_number: true</span><br><span class="line">  auto_detect: false</span><br><span class="line">  tab_replace:</span><br></pre></td></tr></table></figure><p>在主题中引入<code>highlight.js</code>，这里引用网络（可以下载到本地）<br>具体实现可以观看官方文档<a target="_blank" rel="noopener" href="https://highlightjs.org/usage/">https://highlightjs.org/usage/</a></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://highlightjs.org/static/highlight.site.pack.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//代码区块高亮</span></span></span><br><span class="line"><span class="language-javascript">    hljs.<span class="title function_">initHighlightingOnLoad</span>();</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>主题中引入css（官网下载<code>highlight.js</code>压缩包），里面有很多css样式，引入自己喜欢的一种即可<br><strong>补充说明：</strong><br>如果代码区块没有高亮，请观看一下你的代码区块的标签是不是<code>&lt;pre&gt;&lt;code&gt;..&lt;/code&gt;&lt;/pre&gt;</code>格式<br><code>highlight.enable</code>值为false的标签结构</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;pre&gt;</span><br><span class="line">    &lt;code&gt;</span><br><span class="line">        &lt;span&gt;这是代码区块&lt;/span&gt;</span><br><span class="line">    &lt;/code&gt;</span><br><span class="line">&lt;/pre&gt;</span><br></pre></td></tr></table></figure><p>先说一下我遇到的问题<br>我的这个页面中，代码区块的标签格式</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;figure&gt;</span><br><span class="line">    &lt;table&gt;</span><br><span class="line">        &lt;tbody&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;tb&gt;</span><br><span class="line">                    &lt;pre&gt;</span><br><span class="line">                        &lt;span&gt;这是代码区块&lt;/span&gt;</span><br><span class="line">                    &lt;/pre&gt;</span><br><span class="line">                &lt;/tb&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">        &lt;/tbody&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">&lt;/figure&gt;</span><br></pre></td></tr></table></figure><p>可以明显看到代码区块的标签并不是<code>&lt;pre&gt;&lt;code&gt;..&lt;/code&gt;&lt;/pre&gt;</code>格式（<code>highlight.enable</code>值为true导致）<br>进行jquery手动修复<br>在<code>hljs.initHighlightingOnLoad();</code>添加</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;figure table&quot;</span>).<span class="title function_">wrap</span>(<span class="string">&quot;&lt;code&gt;&lt;/code&gt;&quot;</span>);</span><br><span class="line">$(<span class="string">&quot;figure code&quot;</span>).<span class="title function_">wrap</span>(<span class="string">&quot;&lt;pre&gt;&lt;/pre&gt;&quot;</span>);</span><br></pre></td></tr></table></figure><p>将table标签用code标签包裹起来，再用pre标签将code标签包裹起来，实现上面的代码结构（很显然，这个方法有些麻烦）</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//代码块高亮</span></span></span><br><span class="line"><span class="language-javascript">    $(<span class="string">&quot;figure table&quot;</span>).<span class="title function_">wrap</span>(<span class="string">&quot;&lt;code&gt;&lt;/code&gt;&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    $(<span class="string">&quot;figure code&quot;</span>).<span class="title function_">wrap</span>(<span class="string">&quot;&lt;pre&gt;&lt;/pre&gt;&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    hljs.<span class="title function_">initHighlightingOnLoad</span>();</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="添加文章更新时间"><a href="#添加文章更新时间" class="headerlink" title="添加文章更新时间"></a>添加文章更新时间</h2><p>在发布时间后面添加更新时间</p><h3 id="实现方法-6"><a href="#实现方法-6" class="headerlink" title="实现方法"></a>实现方法</h3><p>修改主题文件<code>themes\yilia\layout\_partial\post\date.ejs</code><br>添加如下内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if(!index &amp;&amp; post.updated &amp;&amp; post.updated &gt; post.date)&#123; %&gt;</span><br><span class="line">		&lt;time datetime=&quot;&lt;%= date_xml(post.updated) %&gt;&quot; itemprop=&quot;dateUpdated&quot;&gt;&lt;span&gt;更新于 &lt;/span&gt;&lt;i class=&quot;icon-calendar icon&quot;&gt;&lt;/i&gt;&lt;%= date(post.updated, date_format) %&gt;&lt;/time&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure><p>说明一下原理：<br><code>if</code>判断页面是否文章详细页面，判断文章<code>.md</code>文件中是否有<code>updated</code>参数，<code>updated</code>参数时间是否大于<code>date</code>参数时间<br>如果均成立，添加时间标签<br>修改后的<code>date.ejs</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&quot;&lt;%- url_for(post.path) %&gt;&quot; class=&quot;&lt;%= class_name %&gt;&quot;&gt;</span><br><span class="line">  	&lt;time datetime=&quot;&lt;%= date_xml(post.date) %&gt;&quot; itemprop=&quot;datePublished&quot;&gt;&lt;i class=&quot;icon-calendar icon&quot;&gt;&lt;/i&gt;&lt;%= date(post.date, date_format) %&gt;&lt;/time&gt;</span><br><span class="line">	&lt;% if(!index &amp;&amp; post.updated &amp;&amp; post.updated &gt; post.date)&#123; %&gt;</span><br><span class="line">		&lt;time datetime=&quot;&lt;%= date_xml(post.updated) %&gt;&quot; itemprop=&quot;dateUpdated&quot;&gt;最后更新于：&lt;i class=&quot;icon-calendar icon&quot;&gt;&lt;/i&gt;&lt;%= date(post.updated, date_format) %&gt;&lt;/time&gt;</span><br><span class="line">	&lt;% &#125; %&gt;</span><br><span class="line">&lt;/a&gt;</span><br></pre></td></tr></table></figure><p>如果文章<code>md</code>文件中有<code>updated</code>参数，且<code>updated</code>参数有时间，则文章显示参数时间<br>写文章的时候可以直接在文章开头设置更新时间</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">updated: 2020-02-09 21:05:00</span><br></pre></td></tr></table></figure><p>如果参数为空，显示md文件的修改日期（<code>updated</code>参数可有可无）</p><h3 id="感谢-3"><a href="#感谢-3" class="headerlink" title="感谢"></a>感谢</h3><p>hexo添加文章更新时间（简书）：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/ae3a0666e998">https://www.jianshu.com/p/ae3a0666e998</a><br>hexo添加文章更新时间（CSDN）：<a target="_blank" rel="noopener" href="https://blog.csdn.net/ganzhilin520/article/details/79053399">https://blog.csdn.net/ganzhilin520/article/details/79053399</a></p><h2 id="yilia主题添加aplayer播放器"><a href="#yilia主题添加aplayer播放器" class="headerlink" title="yilia主题添加aplayer播放器"></a>yilia主题添加aplayer播放器</h2><p>yilia主题添加音乐播放器，想了很久，但是一直没有实现<br>本主题属于自适应主题，但是pc端和移动端的智能菜单完全是两个页面，因此考虑添加两个播放器，一个用于pc页面，另一个用于移动端，当然，这只是我的方法<br>两个播放器都是存在的，只不过不会同时显示<br>pc页面时（根据屏幕宽度判断），移动端音乐播放器不显示，移动端页面时，pc播放器隐藏（当然这与音乐播放器添加的位置有很大关系）<br>至于效果，如果你看到这个页面，应该是可以看到效果，因此，我就不贴图片了</p><h3 id="实现方法-7"><a href="#实现方法-7" class="headerlink" title="实现方法"></a>实现方法</h3><p>aplayer播放器的实现，需要运用<a target="_blank" rel="noopener" href="https://github.com/MoePlayer/APlayer">APlayer</a>，下载github压缩包（不到300k，可以耐心等等），解压后把dist文件夹中的js与css文件复制到自己要引用的主题文件夹中，在代码中进行引用即可。<br>这里提供引用的网址，不需要下载文件</p><h3 id="添加pc页面音乐播放器"><a href="#添加pc页面音乐播放器" class="headerlink" title="添加pc页面音乐播放器"></a>添加pc页面音乐播放器</h3><p>定位主题文件<code>themes\yilia\layout\_partial\left-col.ejs</code><br>在<code>&lt;nav class=&quot;header-nav&quot;&gt;</code>标签中的<code>div</code>标签后面添加</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if (theme.music.enable &amp;&amp; site.data &amp;&amp; site.data.musics) &#123; %&gt;</span><br><span class="line">    &lt;div class=&quot;music-player&quot;&gt;</span><br><span class="line">    &lt;%- partial(&#x27;music/aplayer&#x27;) %&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure><p>添加后的样子</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;nav class=&quot;header-nav&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;social&quot;&gt;</span><br><span class="line">        &lt;% for (var i in theme.subnav)&#123; %&gt;</span><br><span class="line">            &lt;a class=&quot;&lt;%= i %&gt;&quot; target=&quot;_blank&quot; href=&quot;&lt;%- url_for(theme.subnav[i]) %&gt;&quot; title=&quot;&lt;%= i %&gt;&quot;&gt;&lt;i class=&quot;icon-&lt;%= i %&gt;&quot;&gt;&lt;/i&gt;&lt;/a&gt;</span><br><span class="line">        &lt;%&#125;%&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;!-- 开始 --&gt;</span><br><span class="line">    &lt;% if (theme.music.enable &amp;&amp; site.data &amp;&amp; site.data.musics) &#123; %&gt;</span><br><span class="line">        &lt;div class=&quot;music-player&quot;&gt;</span><br><span class="line">        &lt;%- partial(&#x27;music/aplayer&#x27;) %&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;% &#125; %&gt;</span><br><span class="line">    &lt;!-- 结束 --&gt;</span><br><span class="line">&lt;/nav&gt;</span><br></pre></td></tr></table></figure><p>在themes\yilia\layout_partial文件夹中创建一个music文件夹（与上面引入的代码相匹配）<br>在music文件夹中创建<code>aplayer.ejs</code>（pc页面播放器js）和<code>mobile-aplayer.ejs</code>（移动端页面）两个文件<br><code>aplayer.ejs</code>添加，仿照<a target="_blank" rel="noopener" href="https://blinkfox.github.io/">https://blinkfox.github.io/</a></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;% var audiosJson = JSON.stringify(site.data.musics); %&gt;</span><br><span class="line"><span class="comment">&lt;!-- aplayer --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 引入dist文件夹中复制的css文件，这里提供网址引用 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 隐藏滚动条两端的按钮和外层轨道，适配yilia主题，只适用于pc页面 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-id">#aplayer</span> ::-webkit-scrollbar-button,#aplayer ::-webkit-scrollbar-track&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">&lt;% if (theme.music.showTitle) &#123; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span><br><span class="line">&lt;%- theme.music.title %&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&lt;% &#125; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;aplayer&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 引入dist文件夹中复制的js文件，这里提供网址引用 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">$(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">new</span> <span class="title class_">APlayer</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">container</span>: <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;aplayer&#x27;</span>),</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">fixed</span>: <span class="string">&#x27;&lt;%- theme.music.fixed %&gt;&#x27;</span> === <span class="string">&#x27;true&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">autoplay</span>: <span class="string">&#x27;&lt;%- theme.music.autoplay %&gt;&#x27;</span> === <span class="string">&#x27;true&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">theme</span>: <span class="string">&#x27;&lt;%- theme.music.theme %&gt;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">loop</span>: <span class="string">&#x27;&lt;%- theme.music.loop %&gt;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">order</span>: <span class="string">&#x27;&lt;%- theme.music.order %&gt;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">preload</span>: <span class="string">&#x27;&lt;%- theme.music.preload %&gt;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">lrcType</span>: <span class="title class_">Number</span>(<span class="string">&#x27;&lt;%- theme.music.lrcType %&gt;&#x27;</span>),</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">volume</span>: <span class="title class_">Number</span>(<span class="string">&#x27;&lt;%- theme.music.volume %&gt;&#x27;</span>),</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">listFolded</span>: <span class="string">&#x27;&lt;%- theme.music.listFolded %&gt;&#x27;</span> === <span class="string">&#x27;true&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">listMaxHeight</span>: <span class="string">&#x27;&lt;%- theme.music.listMaxHeight %&gt;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">audio</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="string">&#x27;&lt;%- audiosJson %&gt;&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="添加移动端页面音乐播放器"><a href="#添加移动端页面音乐播放器" class="headerlink" title="添加移动端页面音乐播放器"></a>添加移动端页面音乐播放器</h3><p>定位主题文件<code>themes\yilia\layout\_partial\mobile-nav.ejs</code><br>在header标签中最后一个nav标签后面添加</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if (theme.music.mobile_enable &amp;&amp; site.data &amp;&amp; site.data.musics) &#123; %&gt;</span><br><span class="line">&lt;nav class=&quot;music-player&quot;&gt;</span><br><span class="line">&lt;%- partial(&#x27;music/mobile-aplayer&#x27;) %&gt;</span><br><span class="line">&lt;/nav&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure><p>添加后的样子</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;nav class=&quot;header-menu js-header-menu&quot;&gt;</span><br><span class="line">        &lt;ul style=&quot;width: &lt;%= ulWidth %&gt;&quot;&gt;</span><br><span class="line">        &lt;% var divide = 100 / count + &#x27;%&#x27; %&gt;</span><br><span class="line">        &lt;% for (var i in theme.menu)&#123; %&gt;</span><br><span class="line">            &lt;li style=&quot;width: &lt;%= divide %&gt;&quot;&gt;&lt;a href=&quot;&lt;%- url_for(theme.menu[i]) %&gt;&quot;&gt;&lt;%= i %&gt;&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">        &lt;%&#125;%&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">    &lt;/nav&gt;</span><br><span class="line">    &lt;!-- 开始 --&gt;</span><br><span class="line">    &lt;% if (theme.music.mobile_enable &amp;&amp; site.data &amp;&amp; site.data.musics) &#123; %&gt;</span><br><span class="line">    &lt;nav class=&quot;music-player&quot;&gt;</span><br><span class="line">    &lt;%- partial(&#x27;music/mobile-aplayer&#x27;) %&gt;</span><br><span class="line">    &lt;/nav&gt;</span><br><span class="line">    &lt;% &#125; %&gt;</span><br><span class="line">    &lt;!-- 结束 --&gt;</span><br><span class="line">&lt;/header&gt;</span><br></pre></td></tr></table></figure><p>在music文件夹中创建的<code>mobile-aplayer.ejs</code>文件中添加</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;% var audiosJson = JSON.stringify(site.data.musics); %&gt;</span><br><span class="line"><span class="comment">&lt;!-- mobile-aplayer --&gt;</span></span><br><span class="line">&lt;% if (theme.music.mobile_showTitle) &#123; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span><br><span class="line">&lt;%- theme.music.mobile_title %&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&lt;% &#125; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;mobile-aplayer&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">$(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">new</span> <span class="title class_">APlayer</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">container</span>: <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;mobile-aplayer&#x27;</span>),</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">fixed</span>: <span class="string">&#x27;&lt;%- theme.music.mobile_fixed %&gt;&#x27;</span> === <span class="string">&#x27;true&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">autoplay</span>: <span class="string">&#x27;&lt;%- theme.music.mobile_autoplay %&gt;&#x27;</span> === <span class="string">&#x27;true&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">theme</span>: <span class="string">&#x27;&lt;%- theme.music.mobile_theme %&gt;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">loop</span>: <span class="string">&#x27;&lt;%- theme.music.mobile_loop %&gt;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">order</span>: <span class="string">&#x27;&lt;%- theme.music.mobile_order %&gt;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">preload</span>: <span class="string">&#x27;&lt;%- theme.music.preload %&gt;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">lrcType</span>: <span class="title class_">Number</span>(<span class="string">&#x27;&lt;%- theme.music.mobile_lrcType %&gt;&#x27;</span>),</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">volume</span>: <span class="title class_">Number</span>(<span class="string">&#x27;&lt;%- theme.music.mobile_volume %&gt;&#x27;</span>),</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">listFolded</span>: <span class="string">&#x27;&lt;%- theme.music.mobile_listFolded %&gt;&#x27;</span> === <span class="string">&#x27;true&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">listMaxHeight</span>: <span class="string">&#x27;&lt;%- theme.music.mobile_listMaxHeight %&gt;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">audio</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="string">&#x27;&lt;%- audiosJson %&gt;&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>下载好的js和css文件只需要在pc播放器引用一次即可，不需要在移动端播放器重复引用</p><h3 id="配置主题文件-config-yml"><a href="#配置主题文件-config-yml" class="headerlink" title="配置主题文件_config.yml"></a>配置主题文件<code>_config.yml</code></h3><p>定位主题文件<code>themes\yilia\_config.yml</code><br>在里面添加如下配置（几乎完全参照<a target="_blank" rel="noopener" href="https://blinkfox.github.io/">hexo-theme-matery</a>主题进行配置）：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"># aplayer音乐播放器</span><br><span class="line"># 要支持音乐播放，就必须开启音乐的播放配置和音乐的数据文件。</span><br><span class="line"># 博客 source 目录下的 _data 目录（没有的话就新建一个）中新建 musics.json 文件（存放音乐数据）</span><br><span class="line"># 吸底模式1.9.1之后版本生效。若开启吸底模式，不建议显示标题</span><br><span class="line">music:</span><br><span class="line">  # aplayer 电脑页面</span><br><span class="line">  enable: true # 是否开启</span><br><span class="line">  showTitle: true # 是否显示标题</span><br><span class="line">  title: 听听音乐</span><br><span class="line">  fixed: false # 吸底模式（fixed:true），迷你模式（mini:true），普通模式（注释此行或者设置fixed:false）</span><br><span class="line">  autoplay: false # 是否自动播放</span><br><span class="line">  theme: &#x27;#4d4d4d&#x27; # 主题色</span><br><span class="line">  loop: &#x27;all&#x27; # 音频循环播放, 可选值: &#x27;all&#x27;, &#x27;one&#x27;, &#x27;none&#x27;</span><br><span class="line">  order: &#x27;list&#x27; # 音频循环顺序, 可选值: &#x27;list&#x27;, &#x27;random&#x27;</span><br><span class="line">  preload: &#x27;auto&#x27; # 音频预加载，两个播放器同时生效，可选值: &#x27;none&#x27;, &#x27;metadata&#x27;, &#x27;auto&#x27;</span><br><span class="line">  volume: 0.7 # 默认音量，请注意播放器会记忆用户设置，用户手动设置音量后默认音量即失效</span><br><span class="line">  lrcType: 1 # 歌词格式，可选值：3（LRC文件歌词格式），1（JS字符串歌词格式），0（不显示歌词）</span><br><span class="line">  listFolded: true # 列表是否折叠</span><br><span class="line">  listMaxHeight: # 列表最大高度，一个列表&#x27;32px&#x27;</span><br><span class="line">  # mobile-aplayer 移动端页面</span><br><span class="line">  mobile_enable: true # 是否开启</span><br><span class="line">  mobile_showTitle: true # 是否显示标题</span><br><span class="line">  mobile_title: </span><br><span class="line">  mobile_fixed: true</span><br><span class="line">  mobile_autoplay: false # 同时开启失效</span><br><span class="line">  mobile_theme: &#x27;#4d4d4d&#x27;</span><br><span class="line">  mobile_loop: &#x27;all&#x27;</span><br><span class="line">  mobile_order: &#x27;list&#x27;</span><br><span class="line">  mobile_volume: 0.7</span><br><span class="line">  mobile_lrcType: 1</span><br><span class="line">  mobile_listFolded: true</span><br><span class="line">  mobile_listMaxHeight:</span><br></pre></td></tr></table></figure><p>上面的内容根据自己需要更改<br><a target="_blank" rel="noopener" href="https://aplayer.js.org/#/zh-Hans/">aplayer中文文档</a>有详细的参数说明</p><h3 id="最后的配置"><a href="#最后的配置" class="headerlink" title="最后的配置"></a>最后的配置</h3><p>博客文件夹（不是主题文件夹）里的 source 中创建 _data 文件夹，在 _data 文件夹中创建 musics.json 文件<br>文件内容如下所示（如果上面歌词格式配置为0，则歌词lrc一行可以去掉）：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[&#123;</span><br><span class="line">    name: &#x27;平凡之路&#x27;,</span><br><span class="line">    artist: &#x27;朴树&#x27;,</span><br><span class="line">    lrc: &#x27;/downloads/lrc/平凡之路-朴树.lrc&#x27;,</span><br><span class="line">    cover: &#x27;http://xxx.com/music-cover1.png&#x27;,</span><br><span class="line">    url: &#x27;http://xxx.com/music1.mp3&#x27;</span><br><span class="line">&#125;,  &#123;</span><br><span class="line">    name: &#x27;后会无期&#x27;,</span><br><span class="line">    artist: &#x27;G.E.M.邓紫棋&#x27;,</span><br><span class="line">    lrc: &#x27;/downloads/lrc/后会无期-G.E.M.邓紫棋.lrc&#x27;,</span><br><span class="line">    cover: &#x27;/medias/music/cover2.png&#x27;,</span><br><span class="line">    url: &#x27;/medias/music/music2.mp3&#x27;</span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure><p>播放器中有标题，简单配置一下标题样式</p><p>定位文件<code>themes\yilia\source\main.0cf68a.css</code>，在里面添加css（同时适用两个播放器,根据需求自行修改）</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* music player title */</span></span><br><span class="line"><span class="selector-id">#header</span> <span class="selector-class">.music-player</span> <span class="selector-class">.title</span>&#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#424242</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>补充说明：<br>1.APlayer.min.css与APlayer.min.js只在pc播放器中添加，并没有在移动页面添加，如果关闭pc播放器，移动端播放器会因为缺失相应的css和js而无法显示<br>这里提供一个解决办法<br>在主题的css与script文件中添加如下代码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/*css中添加*/</span><br><span class="line">&lt;% if (theme.music.enable || theme.music.mobile_enable) &#123; %&gt;</span><br><span class="line">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;&lt;%- theme.css.aplayer %&gt;&quot;&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br><span class="line"></span><br><span class="line">/*script中添加*/</span><br><span class="line">&lt;% if (theme.music.enable || theme.music.mobile_enable) &#123; %&gt;</span><br><span class="line">&lt;script src=&quot;&lt;%- theme.js.aplayer %&gt;&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure><p>把pc页面引入的js与css删除即可<br>2.隐藏滚动条两端的按钮和外层轨道，此样式只适用于pc页面，解决实际歌曲列表长度大于设置长度出现滚动条时播放器自带样式对滚动条设置与主题滚动条样式设置冲突问题，如果移动端出现样式冲突问题，请手动添加（移动端可能不会出现滚动条）<br>3.截至1.10.1版本发现1.9.1之后的版本会使部分浏览器锚点跳转失效（本页面引入的是1.10.1），解决办法就是将传统的<code>#位置</code>修改为<code>?id=#位置</code>。<br>4.移动端preload音频预加载属性不受关闭pc播放器影响<br><strong>到此，yilia主题添加aplayer播放器完成</strong></p><h3 id="分享"><a href="#分享" class="headerlink" title="分享"></a>分享</h3><p>既然谈到了添加音乐播放器，自然是需要音乐的直链，分享一个网易云获取音乐直链的方法（一般不会失效，除非歌曲下架）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://music.163.com/song/media/outer/url?id=</span><br></pre></td></tr></table></figure><p>id后面输入歌曲的id<br>分享一个<a target="_blank" rel="noopener" href="https://music.liuzhijin.cn/">音乐直链搜索工具</a>，通过此工具可以快速获取到网易云音乐歌曲id，自然网易云音乐歌曲直链就获取到了<br>此搜索工具获取到的音乐直链有时间限制，超过一定时间直链失效，目前只知道获取网易云音乐直链这一种方法，分享给大家<br>补充：<br>发现了一个音乐下载神器：<a target="_blank" rel="noopener" href="http://www.333ttt.com/up/tool/">全网音乐免费下载神器</a>，这个获取的音乐地址仿佛没有时间限制（切记，复制input文本框链接的地址，点击下载后获取的地址是有时间限制的）</p><p>获取酷我mp3外链地址<br>首先，获取要获得外链歌曲的id，在酷我歌曲页面上就有<br>其次，将id拼接到<code>player.kuwo.cn/webmusic/st/getNewMuiseByRid?rid=MUSIC_</code>后面，即<code>http://player.kuwo.cn/webmusic/st/getNewMuiseByRid?rid=MUSIC_76446978</code><br>出现的是该音频的xml信息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;Song&gt;</span><br><span class="line">&lt;music_id&gt;76446978&lt;/music_id&gt;</span><br><span class="line">&lt;mv_rid&gt;null&lt;/mv_rid&gt;</span><br><span class="line">&lt;name&gt;鐧捐姳棣�&lt;/name&gt;</span><br><span class="line">&lt;song_url&gt;http://yinyue.kuwo.cnhttp://yinyue.kuwo.cn/yy/gequ-weixinyu_baihuaxiang/76446978.htm&lt;/song_url&gt;</span><br><span class="line">&lt;artist&gt;榄忔柊闆�&lt;/artist&gt;</span><br><span class="line">&lt;artid&gt;&lt;/artid&gt;</span><br><span class="line">&lt;singer&gt;榄忔柊闆�&lt;/singer&gt;</span><br><span class="line">&lt;special&gt;鐧捐姳棣�&lt;/special&gt;</span><br><span class="line">&lt;ridmd591&gt;32257EAB20266AE1B2BE8BDF21480CF5&lt;/ridmd591&gt;</span><br><span class="line">&lt;mp3size&gt;null&lt;/mp3size&gt;</span><br><span class="line">&lt;artist_url&gt;http://yinyue.kuwo.cnhttp://yinyue.kuwo.cn/yy/geshou-weixinyu/%E9%AD%8F%E6%96%B0%E9%9B%A8.htm&lt;/artist_url&gt;</span><br><span class="line">&lt;auther_url&gt;http://www.kuwo.cn/mingxing/%E9%AD%8F%E6%96%B0%E9%9B%A8/&lt;/auther_url&gt;</span><br><span class="line">&lt;playid&gt;play?play=MQ==&amp;num=MQ==&lt;/playid&gt;</span><br><span class="line">&lt;artist_pic&gt;http://img2.kuwo.cn/star/starheads/120/2/2ac2a0c633723c75215d05016e400af_0.jpg&lt;/artist_pic&gt;</span><br><span class="line">&lt;artist_pic240&gt;&lt;/artist_pic240&gt;</span><br><span class="line">&lt;path&gt;null&lt;/path&gt;</span><br><span class="line">&lt;mp3path&gt;&amp;format=mp3&amp;rid=MUSIC_76446978&amp;response=res&amp;type=convert_url&amp;&lt;/mp3path&gt;</span><br><span class="line">&lt;aacpath&gt;&amp;format=mp3&amp;rid=MUSIC_76446978&amp;response=res&amp;type=convert_url&amp;&lt;/aacpath&gt;</span><br><span class="line">&lt;mp3dl&gt;antiserver.kuwo.cn/anti.s?useless=&lt;/mp3dl&gt;</span><br><span class="line">&lt;aacdl&gt;antiserver.kuwo.cn/anti.s?useless=&lt;/aacdl&gt;</span><br><span class="line">&lt;lyric&gt;DBYAHlReXEpRUEAeCgxVEgAORRgLG0MXCRgaCwoRAB5UAwEaBAkEBhwaXxcAHVReSAsMAVEkOj0wJjpbX1taT1xSVA==&lt;/lyric&gt;</span><br><span class="line">&lt;lyric_zz&gt;DBYAHlReXEpRUEAeCgxVEgAORRgLG0MXCRgaCwoRAB5UAwEaBAkEBhwaXxcAHVReSAsMAVEkOj0wJjpbX1taT1xSVE8DHBodWF0=&lt;/lyric_zz&gt;</span><br><span class="line">&lt;/Song&gt;</span><br></pre></td></tr></table></figure><p>提取<code>&lt;mp3path&gt;</code>和<code>&lt;mp3dl&gt;</code>中的内容，创建url： http://+<code>&lt;mp3dl&gt;</code>内容+<code>&lt;mp3path&gt;</code>内容<br>以上面信息为例，url如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://antiserver.kuwo.cn/anti.s?useless=&amp;format=mp3&amp;rid=MUSIC_76446978&amp;response=res&amp;type=convert_url&amp;</span><br></pre></td></tr></table></figure><p>此url为该歌曲的外链（仅适用于酷我音乐）</p><h4 id="感谢-4"><a href="#感谢-4" class="headerlink" title="感谢"></a>感谢</h4><p>yilia主题添加aplayer播放器的实现，参照以下网站进行完成，在此表示感谢<br><a target="_blank" rel="noopener" href="https://www.techgrow.cn/posts/cfdad023.html">Hexo全局添加APlayer音乐播放器</a><br><a target="_blank" rel="noopener" href="http://lantianwork.coding.me/2019/01/13/Hexo%E5%A2%9E%E5%8A%A0APlayer%E9%9F%B3%E4%B9%90%E6%92%AD%E6%94%BE%E5%8A%9F%E8%83%BD/">Hexo增加APlayer音乐播放功能</a><br><a target="_blank" rel="noopener" href="https://blinkfox.github.io/2018/09/28/qian-duan/hexo-bo-ke-zhu-ti-zhi-hexo-theme-matery-de-jie-shao/#toc-heading-18">Hexo博客主题之hexo-theme-matery的介绍</a><br><a target="_blank" rel="noopener" href="https://aplayer.js.org/#/zh-Hans/">aplayer中文文档</a></p><h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>最近又看到了许多有用的功能<br>随时更新，可以在所有文章中查询想要的功能</p></div><div class="reprint" id="reprint-statement"><div class="reprint__author"><span class="reprint-meta" style="font-weight:700">文章作者: </span><span class="reprint-info"><a href="/" rel="external nofollow noreferrer">akbcd</a></span></div><div class="reprint__type"><span class="reprint-meta" style="font-weight:700">文章链接: </span><span class="reprint-info"><a href="https://akbcd.github.io/2019/10/14/yilia%E4%B8%BB%E9%A2%98%E8%BF%9B%E9%98%B6%E9%85%8D%E7%BD%AE/">https://akbcd.github.io/2019/10/14/yilia主题进阶配置/</a></span></div><div class="reprint__notice"><span class="reprint-meta" style="font-weight:700">版权声明: </span><span class="reprint-info">本博客所有文章除特別声明外，均采用 <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a> 许可协议。转载请注明来源 <a href="https://akbcd.github.io" target="_blank">akbcd</a> !</span></div></div></div><div class="article-info article-info-index"><div class="article-tag tagcloud"><i class="icon-price-tags icon"></i><ul class="article-tag-list"><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag article-tag-list-link color3">博客</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag article-tag-list-link color5">hexo</a></li></ul></div><div class="share-btn share-icons tooltip-left"><div class="tooltip tooltip-east"><span class="tooltip-item"><a style="cursor:pointer" class="share-sns share-outer"><i class="icon icon-share"></i> </a></span><span class="tooltip-content"><div class="share-wrap"><div class="share-icons"><a class="weibo share-sns" style="cursor:pointer" data-type="weibo" title="weibo"><i class="icon icon-weibo"></i> </a><a class="weixin share-sns wxFab" style="cursor:pointer" data-type="weixin" title="weixin"><i class="icon icon-weixin"></i> </a><a class="qq share-sns" style="cursor:pointer" data-type="qq" title="qq"><i class="icon icon-qq"></i> </a><a class="douban share-sns" style="cursor:pointer" data-type="douban" title="douban"><i class="icon icon-douban"></i> </a><a class="qzone share-sns" style="cursor:pointer" data-type="qzone" title="qzone"><i class="icon icon-qzone"></i> </a><a class="facebook share-sns" style="cursor:pointer" data-type="facebook" title="facebook"><i class="icon icon-facebook"></i> </a><a class="twitter share-sns" style="cursor:pointer" data-type="twitter" title="twitter"><i class="icon icon-twitter"></i> </a><a class="google share-sns" style="cursor:pointer" data-type="google" title="google"><i class="icon icon-google"></i></a></div></div></span></div></div><div class="page-modal wx-share js-wx-box"><a class="close js-modal-close" style="cursor:pointer"><i class="icon icon-close"></i></a><p>扫一扫，分享到微信</p><div class="wx-qrcode"><img src="//api.qrserver.com/v1/create-qr-code/?data=https://akbcd.github.io/2019/10/14/yilia%E4%B8%BB%E9%A2%98%E8%BF%9B%E9%98%B6%E9%85%8D%E7%BD%AE/" alt="微信分享二维码"></div></div><div class="mask js-mask"></div><div class="clearfix"></div></div></div></article><nav id="article-nav"><a href="/2019/10/20/hexo4-0%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/" id="article-nav-newer" class="article-nav-link-wrap"><i class="icon-circle-left"></i><div class="article-nav-title">hexo4.0遇到的问题</div></a><a href="/2019/10/09/jsp%E7%AC%94%E8%AE%B0/" id="article-nav-older" class="article-nav-link-wrap"><div class="article-nav-title">jsp笔记</div><i class="icon-circle-right"></i></a></nav><aside class="wrap-side-operation"><div class="mod-side-operation"><div class="jump-container" id="js-jump-container" style="display:none"><i class="icon-font icon-back"></i></div><div class="toc-container tooltip-left"><i class="icon-font icon-category"></i><div class="tooltip tooltip-east"><span class="tooltip-item"></span> <span class="tooltip-content"><div class="toc-article"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#yilia%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0%E6%9C%AC%E5%9C%B0%E5%A4%B4%E5%83%8F"><span class="toc-number">1.</span> <span class="toc-text">yilia主题添加本地头像</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95"><span class="toc-number">1.1.</span> <span class="toc-text">实现方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E5%AD%97%E6%95%B0%E7%BB%9F%E8%AE%A1"><span class="toc-number">2.</span> <span class="toc-text">添加字数统计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95-1"><span class="toc-number">2.1.</span> <span class="toc-text">实现方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E5%85%A8%E5%B1%80%E6%90%9C%E7%B4%A2%E5%8A%9F%E8%83%BD"><span class="toc-number">3.</span> <span class="toc-text">安装全局搜索功能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%88%E6%9E%9C%E5%9B%BE%EF%BC%88%E5%85%B7%E4%BD%93%E6%95%88%E6%9E%9C%E5%8F%AF%E5%8F%82%E7%9C%8B%E6%9C%AC%E4%B8%BB%E9%A2%98%EF%BC%89"><span class="toc-number">3.1.</span> <span class="toc-text">效果图（具体效果可参看本主题）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95-2"><span class="toc-number">3.2.</span> <span class="toc-text">实现方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#yilia%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0%E5%8D%9A%E5%AE%A2%E6%96%87%E7%AB%A0%E7%BD%AE%E9%A1%B6%E5%8A%9F%E8%83%BD%E5%92%8C%E7%BD%AE%E9%A1%B6%E6%A0%87%E7%AD%BE"><span class="toc-number">4.</span> <span class="toc-text">yilia主题添加博客文章置顶功能和置顶标签</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95-3"><span class="toc-number">4.1.</span> <span class="toc-text">实现方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#hexo%E6%96%87%E7%AB%A0%E5%8A%A0%E5%AF%86%E5%8A%9F%E8%83%BD"><span class="toc-number">5.</span> <span class="toc-text">hexo文章加密功能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%95%88%E6%9E%9C"><span class="toc-number">5.1.</span> <span class="toc-text">实现效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95-4"><span class="toc-number">5.2.</span> <span class="toc-text">实现方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B4%E6%98%8E"><span class="toc-number">5.3.</span> <span class="toc-text">说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%84%9F%E8%B0%A2"><span class="toc-number">5.4.</span> <span class="toc-text">感谢</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#yilia%E4%B8%BB%E9%A2%98%E7%A7%BB%E5%8A%A8%E7%AB%AF%E6%B7%BB%E5%8A%A0%E9%A1%B5%E9%9D%A2%E8%BF%9B%E5%BA%A6%E6%9D%A1"><span class="toc-number">6.</span> <span class="toc-text">yilia主题移动端添加页面进度条</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B4%E6%98%8E-1"><span class="toc-number">6.1.</span> <span class="toc-text">说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95-5"><span class="toc-number">6.2.</span> <span class="toc-text">实现方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%84%9F%E8%B0%A2-1"><span class="toc-number">6.3.</span> <span class="toc-text">感谢</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#hexo%E4%BB%A3%E7%A0%81%E5%9D%97%E5%A4%8D%E5%88%B6%E5%8A%9F%E8%83%BD"><span class="toc-number">7.</span> <span class="toc-text">hexo代码块复制功能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B4%E6%98%8E-2"><span class="toc-number">7.1.</span> <span class="toc-text">说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95%EF%BC%88%E6%9B%B4%E6%96%B0%EF%BC%89"><span class="toc-number">7.2.</span> <span class="toc-text">实现方法（更新）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%95%88%E6%9E%9C-1"><span class="toc-number">7.3.</span> <span class="toc-text">实现效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E8%AF%B4%E6%98%8E"><span class="toc-number">7.4.</span> <span class="toc-text">更新说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%84%9F%E8%B0%A2-2"><span class="toc-number">7.5.</span> <span class="toc-text">感谢</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%8C%BA%E5%9D%97%E9%AB%98%E4%BA%AE"><span class="toc-number">8.</span> <span class="toc-text">代码区块高亮</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%A4%E7%A7%8D%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95"><span class="toc-number">8.1.</span> <span class="toc-text">两种实现方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%A7%8D%EF%BC%9A%E4%BD%BF%E7%94%A8%E4%B8%BB%E9%A2%98%E8%87%AA%E5%B8%A6%E4%BB%A3%E7%A0%81%E5%8C%BA%E5%9D%97%E9%AB%98%E4%BA%AE%E5%AE%9E%E7%8E%B0"><span class="toc-number">8.1.1.</span> <span class="toc-text">第一种：使用主题自带代码区块高亮实现</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%A7%8D%EF%BC%9A%E9%80%9A%E8%BF%87highlight-js%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81%E5%8C%BA%E5%9D%97%E9%AB%98%E4%BA%AE"><span class="toc-number">8.1.2.</span> <span class="toc-text">第二种：通过highlight.js实现代码区块高亮</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E6%96%87%E7%AB%A0%E6%9B%B4%E6%96%B0%E6%97%B6%E9%97%B4"><span class="toc-number">9.</span> <span class="toc-text">添加文章更新时间</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95-6"><span class="toc-number">9.1.</span> <span class="toc-text">实现方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%84%9F%E8%B0%A2-3"><span class="toc-number">9.2.</span> <span class="toc-text">感谢</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#yilia%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0aplayer%E6%92%AD%E6%94%BE%E5%99%A8"><span class="toc-number">10.</span> <span class="toc-text">yilia主题添加aplayer播放器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95-7"><span class="toc-number">10.1.</span> <span class="toc-text">实现方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0pc%E9%A1%B5%E9%9D%A2%E9%9F%B3%E4%B9%90%E6%92%AD%E6%94%BE%E5%99%A8"><span class="toc-number">10.2.</span> <span class="toc-text">添加pc页面音乐播放器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%A1%B5%E9%9D%A2%E9%9F%B3%E4%B9%90%E6%92%AD%E6%94%BE%E5%99%A8"><span class="toc-number">10.3.</span> <span class="toc-text">添加移动端页面音乐播放器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E4%B8%BB%E9%A2%98%E6%96%87%E4%BB%B6-config-yml"><span class="toc-number">10.4.</span> <span class="toc-text">配置主题文件_config.yml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%80%E5%90%8E%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="toc-number">10.5.</span> <span class="toc-text">最后的配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E4%BA%AB"><span class="toc-number">10.6.</span> <span class="toc-text">分享</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%84%9F%E8%B0%A2-4"><span class="toc-number">10.6.1.</span> <span class="toc-text">感谢</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%80%E5%90%8E"><span class="toc-number">11.</span> <span class="toc-text">最后</span></a></li></ol></div></span></div></div></div></aside><div id="article-comments"></div></div></div></div><footer id="footer"><div class="outer"><div id="footer-info"><div class="footer-left">&copy; 2025 akbcd</div><div class="footer-right"><a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten</div></div></div></footer></div><div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)"><div class="tools-nav header-menu"><ul style="width:70%"><li style="width:50%" q-on="click: openSlider(e, 'innerArchive')"><a style="cursor:pointer" q-class="active:innerArchive">所有文章</a></li><li style="width:50%" q-on="click: openSlider(e, 'friends')"><a style="cursor:pointer" q-class="active:friends">友链</a></li></ul></div><div class="tools-wrap"><section class="tools-section tools-section-all" q-show="innerArchive"><div class="search-wrap"><input class="search-ipt" q-model="search" type="text" placeholder="查找文章..."> <i class="icon-search icon" q-show="search|isEmptyStr" id="js-icon-search"></i> <i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i></div><div class="widget tagcloud search-tag"><p class="search-tag-wording">标签：</p><label class="search-switch"><input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags" aria-label="showTags"></label><ul class="article-tag-list" q-show="showTags"><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color3">大学</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color3">博客</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color5">hexo</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color2">github</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color1">linux</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color3">随笔</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color3">vm</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color5">html</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color4">jsp</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color3">js</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color3">mybatis</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color4">sql</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color2">java基础</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color3">笔记</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color3">bt</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color3">教程</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color5">springMVC</a></li><li class="article-tag-list-item"><a style="cursor:pointer" class="js-tag color1">PowerShell</a></li><li><div class="clearfix"></div></li></ul></div><ul class="search-ul"><li><p q-show="jsonFail" style="padding:20px 20px 0 20px;font-size:12px">缺失模块。<br>1、请确保node版本大于6.2<br>2、在博客根目录（注意不是yilia根目录）执行以下命令：<br>npm i hexo-generator-json-content --save<br>3、在根目录_config.yml里添加配置：</p></li><li><pre style="font-size:12px;padding-left:20px" q-show="jsonFail">
jsonContent:
  meta: false
  pages: false
  posts:
    title: true
    date: true
    path: true
    text: false
    raw: false
    content: false
    slug: false
    updated: false
    comments: false
    link: false
    permalink: false
    excerpt: false
    categories: false
    tags: true
            </pre></li><li class="search-li" q-repeat="items" q-show="isShow"><a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a><p class="search-time"><i class="icon-calendar icon"></i> <span q-text="date|dateformat"></span></p><p class="search-tag"><i class="icon-price-tags icon"></i> <span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span></p></li></ul></section><section class="tools-section tools-section-friends" q-show="friends"><ul class="search-ul"><li class="search-li"><a href="http://tool.mkblog.cn/tuchuang/" target="_blank" title="聚合图床 - 微博图床" class="search-title"><i class="icon-quo-left icon"></i>聚合图床 - 微博图床</a></li><li class="search-li"><a href="https://c.runoob.com/" target="_blank" title="菜鸟工具 - 不止于工具" class="search-title"><i class="icon-quo-left icon"></i>菜鸟工具 - 不止于工具</a></li><li class="search-li"><a href="https://tool.css-js.com/" target="_blank" title="CSS, JavaScript 压缩, 美化, 加密, 解密" class="search-title"><i class="icon-quo-left icon"></i>CSS, JavaScript 压缩, 美化, 加密, 解密</a></li><li class="search-li"><a href="https://www.gequbao.com/" target="_blank" title="歌曲宝" class="search-title"><i class="icon-quo-left icon"></i>歌曲宝</a></li><li class="search-li"><a href="http://tool.mkblog.cn/github/" target="_blank" title="GitHub加速下载工具" class="search-title"><i class="icon-quo-left icon"></i>GitHub加速下载工具</a></li><li class="search-li"><a href="https://www.7acg.com/" target="_blank" title="在线动画 动漫下载 - AGE动漫" class="search-title"><i class="icon-quo-left icon"></i>在线动画 动漫下载 - AGE动漫</a></li><li class="search-li"><a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank" title="hexo-theme-matery主题" class="search-title"><i class="icon-quo-left icon"></i>hexo-theme-matery主题</a></li></ul></section></div></div><div class="pswp" tabindex="-1" role="dialog" aria-hidden="true"><div class="pswp__bg"></div><div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div><div class="pswp__item"></div><div class="pswp__item"></div></div><div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div><button type="button" class="pswp__button pswp__button--close" title="Close (Esc)"></button> <button type="button" class="pswp__button pswp__button--share" style="display:none" title="Share"></button> <button type="button" class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button> <button type="button" class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div><button type="button" class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button> <button type="button" class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div><script src="/js/lib/photoswipe/photoswipe.min.js"></script><script src="/js/lib/photoswipe/photoswipe-ui-default.min.js"></script><script src="/js/lib/clipboard/clipboard.min.js"></script><script src="/js/copyFn.js"></script><script>copyFn("复制","复制成功","复制失败")</script><script async src="/js/backTop.js"></script><script async src="/js/share.js"></script><script async src="/js/anm.js"></script><script async src="/js/fix.js"></script><script async src="/js/slider.js"></script><script async src="/js/addHighlightTool.js"></script><script src="/js/viewer.js"></script><script src="/js/mobile.js"></script></div></body></html>